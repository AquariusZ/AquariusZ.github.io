<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>我希望世界和平</title>
  <subtitle>hallo world</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-04-22T07:47:25.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>aquarius</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LDAP详解</title>
    <link href="http://yoursite.com/2017/04/08/LDAP%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/04/08/LDAP详解/</id>
    <published>2017-04-08T00:55:48.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>selinux详解</title>
    <link href="http://yoursite.com/2017/04/04/selinux%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/04/04/selinux详解/</id>
    <published>2017-04-04T06:16:40.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是selinux"><a href="#什么是selinux" class="headerlink" title="什么是selinux"></a>什么是selinux</h1><p>#</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是selinux&quot;&gt;&lt;a href=&quot;#什么是selinux&quot; class=&quot;headerlink&quot; title=&quot;什么是selinux&quot;&gt;&lt;/a&gt;什么是selinux&lt;/h1&gt;&lt;p&gt;#&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="service" scheme="http://yoursite.com/tags/service/"/>
    
  </entry>
  
  <entry>
    <title>find命令详解</title>
    <link href="http://yoursite.com/2017/01/24/find%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/24/find命令详解/</id>
    <published>2017-01-24T05:09:59.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>find命令算是linux系统管理员必备的技能,它能通过文件名查找,时间查找,权限查找,用户查找,大小查找,文件类型查找等等,还支持正则表达示.查找之后还能执行操作,功能强大.本文将从这些属性来一一介绍,欢迎阅读.</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">find [-H] [-L] [-P] [-D debugopts] [-Olevel] [starting-point...] [expression]</div><div class="line">这是文档中的语法.</div><div class="line">大多数被简化成下面</div><div class="line">find [path] [express] [actions]</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">H 只遵循指定符号链接.例: `find -H uname /bin -type f -print` 只会查找uname符号链接.</div><div class="line">L 遵循所有符号链接. 例: `find -L /bin -type f -print` 会查找所有文件,包括符号链接.</div><div class="line">P 默认选项,不遵循符号链接.也就是不查找符号链接.例: `find [-P] /bin -type f -print`</div><div class="line">不会查找符号链接.&quot;-P&quot;可写可不写.</div><div class="line">H L P 三个同时使用时,只有最后一个生效.</div><div class="line">D 调试选项.此选项也是非常有用,有兴趣的可以查看文档,这里不作解释.</div><div class="line">-Olevel 启用查询优化。查找程序重新排序测试以加速执行，同时保持整体效果.</div><div class="line">很少用,有兴趣的可以查看文档,这里不作解释</div></pre></td></tr></table></figure>
<h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ol>
<li>如果没有指定目录,就从当前目录开始查找.</li>
<li>find命令分左右执行,左边为tests(条件测试),右边为actions(动作).</li>
<li>find命令中,有逻辑或与非,默认是与操作,就是and.</li>
<li>find命令中,默认mindepth(最小深度)为1, 但是不要指定为负数,表示处理所有文件,maxdepth表示最大深度,0表示用于测试,可以指定正整数.</li>
</ol>
<h1 id="逻辑操作"><a href="#逻辑操作" class="headerlink" title="逻辑操作"></a>逻辑操作</h1><h1 id="find命令中是有逻辑操作分别是-o-a"><a href="#find命令中是有逻辑操作，分别是-o-a" class="headerlink" title="find命令中是有逻辑操作，分别是-o,!,-a."></a>find命令中是有逻辑操作，分别是-o,!,-a.</h1><h2 id="-aand为默认为逻辑与操作所有条件同时满足不写也可以看例子"><a href="#a-and-为默认-为逻辑与操作-所有条件同时满足-不写也可以-看例子" class="headerlink" title="-a(and)为默认,为逻辑与操作,所有条件同时满足.不写也可以.看例子:"></a>-a(and)为默认,为逻辑与操作,所有条件同时满足.不写也可以.看例子:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; -ctime -3 -print</div><div class="line">该语句表示查找当前目录下创建时间小于3天的并且以log结尾的文件,等同</div><div class="line">find . -name &quot;*log&quot; -a -ctime -3 -print</div><div class="line">find . -name &quot;*log&quot; -and -ctime -3 -print</div></pre></td></tr></table></figure>
<h2 id="-oor为逻辑或操作只满足一个条件即可看例子"><a href="#o-or-为逻辑或操作-只满足一个条件即可-看例子：" class="headerlink" title="-o(or)为逻辑或操作,只满足一个条件即可.看例子："></a>-o(or)为逻辑或操作,只满足一个条件即可.看例子：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; -o -ctime -3 -print</div><div class="line">该语句表示查找当前目录下以log结尾或者创建时间小于3天的文件.还可以</div><div class="line">find . -name &quot;*log&quot; -or -ctime -3 -print</div></pre></td></tr></table></figure>
<h2 id="为逻辑非操作叹号后的tests取反看例子"><a href="#为逻辑非操作-叹号后的tests取反-看例子" class="headerlink" title="!为逻辑非操作,叹号后的tests取反.看例子:"></a>!为逻辑非操作,叹号后的tests取反.看例子:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; ! -ctime -3 -print</div><div class="line">该语句表示查找当前目录下以log结尾并且创建时间不小于3天的文件.等同于</div><div class="line">find . -name &quot;*log&quot; -not -ctime -3 -print</div></pre></td></tr></table></figure>
<h1 id="tests条件测试"><a href="#TESTS条件测试" class="headerlink" title="TESTS条件测试"></a>TESTS条件测试</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">数值参数可以指定</div><div class="line">+n 大于n</div><div class="line">-n 小于n</div><div class="line">n 等于n</div><div class="line">-name 按名字查找</div><div class="line">-amin n 最近n分钟被访问文件</div><div class="line">-cmin n 最近n分钟创建的文件</div><div class="line">-mmin n 最近n分钟修改折文件</div><div class="line">-atime n 最后n*24访问的文件</div><div class="line">-ctime n 最后n*24创建的文件</div><div class="line">-mtime n 最后n*24修改的文件</div><div class="line">-userd n 最后n天更新的文件</div><div class="line">-anewer file 查找文件更新时间比file更新时间更新折文件</div><div class="line">-newer file 比file更新的文件</div><div class="line">-gid n 查找用户组为n的文件</div><div class="line">-group gname 查找为gname用户组的文件</div><div class="line">-uid n uid为n用户的文件</div><div class="line">-user uname uname的文件</div><div class="line">-empty 查找为空的文件或目录</div><div class="line">-links n 文件有n个链接</div><div class="line">-nogroup 没有组的文件</div><div class="line">-nouser 没有用户的文件</div><div class="line">-regex pattern 文件名匹配正则表达式模式</div><div class="line">-iregex pattern 文件名匹配正则表达式模式,但不区分大小写</div><div class="line">-path pattern 路径模式,常和-prune用于路径过虑</div><div class="line">-perm mode 权限查找</div><div class="line">-size n[cwbkmg] 根据大小查找(c 字节,w 两个字节的单词,b 512 byte的块,k 1024byte,m 1048576 byte,g 1073741824 byte)</div><div class="line">-type [bcdpflsD] 根据文件类型查找(b 块文件,c 字符文件,d 目录,p 管道,f 普通文件,l 链接文件,s socket文件,D Solaris用)</div><div class="line">-writable 文件是否可读</div><div class="line">-readable 文件是否可写</div><div class="line">-executable 文件是否可执行</div><div class="line">-samefile name 文件名相同的文件</div></pre></td></tr></table></figure>
<h1 id="actions动作"><a href="#ACTIONS动作" class="headerlink" title="ACTIONS动作"></a>ACTIONS动作</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">-delete 删除文件,成功为True.如果失败,则发出错误消息.使用-delete默认打开-depth选项.如果不指定-depth，则全部删除.**注意,-delete不能和-prune.**</div><div class="line">-exec command &#123;&#125; \; 执行命令,字符串`&#123;&#125;&apos;被当前代替在命令的参数中出现的文件名被处理，&apos;\&apos;转义&apos;;&apos;. 为每个匹配的文件运行一次指定的命令.--exec存在安全问题,建使用--execdir.</div><div class="line">-exec command &#123;&#125; + 该命令性能好于--exec command &#123;&#125; \;</div><div class="line">-execdir command &#123;&#125; \; 像-exec一样，但指定的命令从包含匹配的子目录运行,而不是从您开始的目录.</div><div class="line">-execdir command &#123;&#125; +  一样该命令性能好于--execdir command &#123;&#125; \; , 更安全.</div><div class="line">-fls file  和-ls一样,输出文件详细信息,只不过写入文件.总是创建输出文件.</div><div class="line">-fprint file 只打印匹配文件名到文件.</div><div class="line">-fprint0 file 打印匹配文件名到文件,去掉换行符.</div><div class="line">-fprintf file format</div><div class="line">-ls 显示匹配文件详细信息.就像ls -dils</div><div class="line">-ok command ; 执行命令,但总是先询问,</div><div class="line">-okdir command ;  像-execdir一样，但是以-ok相同的方式询问用户. 如果用户不同意，只要返回</div><div class="line">-print 打印完整的文件名.</div><div class="line">-print0 打印完整的文件名,但后面跟一个空字符.此选项对应于xargs -0.</div><div class="line">-printf format 在标准输出上打印格式，解释`\&apos;转义和&apos;％&apos;指令.</div><div class="line">-prune true 常和-path用于过虑目录.</div><div class="line">-quit 立即退出,例如找到了某个文件,不想继续查找,可以使用该选项.</div></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><h2 id="查找当前目录及子目录"><a href="#查找当前目录及子目录" class="headerlink" title="查找当前目录及子目录"></a>查找当前目录及子目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find</div><div class="line"># 就行了</div><div class="line">.</div><div class="line">./fstab</div><div class="line">./crypttab</div><div class="line">./mtab</div><div class="line">./resolv.conf</div><div class="line">./pki</div><div class="line">./pki/rpm-gpg</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-Debug-7</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-Testing-7</div><div class="line">./pki/tls</div><div class="line">./pki/tls/certs</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找一个passwd的文件"><a href="#查找一个passwd的文件" class="headerlink" title="查找一个passwd的文件"></a>查找一个passwd的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find . -name &apos;passwd&apos;</div><div class="line">./passwd</div><div class="line">./pam.d/passwd</div></pre></td></tr></table></figure>
<h2 id="查找时忽略大小写不写目录就是当前目录"><a href="#查找时忽略大小写-不写目录就是当前目录" class="headerlink" title="查找时忽略大小写,不写目录就是当前目录"></a>查找时忽略大小写,不写目录就是当前目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find  -iname &quot;PASSWD&quot;</div><div class="line">./passwd</div><div class="line">./pam.d/passwd</div></pre></td></tr></table></figure>
<h2 id="查找conf结尾的文件"><a href="#查找”-conf”结尾的文件" class="headerlink" title="查找”.conf”结尾的文件"></a>查找”.conf”结尾的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -name &quot;*.conf&quot;</div><div class="line">./resolv.conf</div><div class="line">./pki/ca-trust/ca-legacy.conf</div><div class="line">./yum/pluginconf.d/fastestmirror.conf</div><div class="line">./yum/pluginconf.d/langpacks.conf</div><div class="line">./yum/protected.d/systemd.conf</div><div class="line">./yum/version-groups.conf</div><div class="line">./rsyslog.conf</div><div class="line">./dracut.conf</div></pre></td></tr></table></figure>
<h2 id="查找小于10分钟前访问的文件"><a href="#查找小于10分钟前访问的文件" class="headerlink" title="查找小于10分钟前访问的文件"></a>查找小于10分钟前访问的文件</h2><p>基于分钟查找有”-amin(accessed n minutes)”,”-cmin(change n minutes) “,”mmin(modified n minutes)”，基于天查找有”-atime(accessed n<em>24 hours) “,”-ctime(change n</em>24 hours)”,”mtime(modified n*24 hours)”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -amin -10</div><div class="line">./passwd</div></pre></td></tr></table></figure></p>
<h2 id="查找大于10分钟修改的文件"><a href="#查找大于10分钟修改的文件" class="headerlink" title="查找大于10分钟修改的文件"></a>查找大于10分钟修改的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -cmin +10</div><div class="line">/etc/vconsole.conf</div><div class="line">/etc/locale.conf</div><div class="line">/etc/hostname</div><div class="line">/etc/.updated</div><div class="line">/etc/aliases.db</div><div class="line">/etc/subgid</div><div class="line">/etc/subuid</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找7天内访问的文件"><a href="#查找7天内访问的文件" class="headerlink" title="查找7天内访问的文件"></a>查找7天内访问的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -atime -7</div><div class="line">./nsswitch.conf.rpmnew</div><div class="line">./GeoIP.conf</div><div class="line">./GeoIP.conf.default</div><div class="line">./krb5.conf.d</div><div class="line">./screenrc</div></pre></td></tr></table></figure>
<h2 id="查找大于7天访问的文件"><a href="#查找大于7天访问的文件" class="headerlink" title="查找大于7天访问的文件"></a>查找大于7天访问的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -atime +7</div><div class="line">./vconsole.conf</div><div class="line">./locale.conf</div><div class="line">./hostname</div><div class="line">./.updated</div></pre></td></tr></table></figure>
<h2 id="查找3天修改的文件"><a href="#查找3天修改的文件" class="headerlink" title="查找3天修改的文件"></a>查找3天修改的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -mtime 3</div><div class="line">./chrony.keys</div><div class="line">./kernel</div><div class="line">./kernel/postinst.d</div><div class="line">./kernel/postinst.d/51-dracut-rescue-postinst.sh</div><div class="line">./sudo-ldap.conf</div><div class="line">./sudo.conf</div><div class="line">./sudoers</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下用户为root和5分钟之前访问过的文件"><a href="#查找-etc目录下用户为root和5分钟之前访问过的文件" class="headerlink" title="查找/etc目录下用户为root和5分钟之前访问过的文件"></a>查找/etc目录下用户为root和5分钟之前访问过的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">find /etc/ -user root -amin +5</div><div class="line">/etc/my.cnf</div><div class="line">/etc/ssh</div><div class="line">/etc/ssh/sshd_config</div><div class="line">/etc/ssh/ssh_config</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下用户为root和文件内容为空的文件"><a href="#查找-etc目录下用户为root和文件内容为空的文件" class="headerlink" title="查找/etc目录下用户为root和文件内容为空的文件"></a>查找/etc目录下用户为root和文件内容为空的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -user root -empty</div><div class="line">/etc/security/console.apps</div><div class="line">/etc/security/console.perms.d</div><div class="line">/etc/security/namespace.d</div><div class="line">/etc/security/opasswd</div><div class="line">/etc/.pwd.lock</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下没有组的文件但不为空的文件"><a href="#查找-etc目录下没有组的文件但不为空的文件" class="headerlink" title="查找/etc目录下没有组的文件但不为空的文件"></a>查找/etc目录下没有组的文件但不为空的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -nogroup ! -empty</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找文件链接大于5个的文件但文件小于1m"><a href="#查找文件链接大于5个的文件但文件小于1M" class="headerlink" title="查找文件链接大于5个的文件但文件小于1M"></a>查找文件链接大于5个的文件但文件小于1M</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -links -5 -size -1M</div><div class="line">./selinux/targeted/contexts/netfilter_contexts</div><div class="line">./selinux/targeted/semanage.read.LOCK</div><div class="line">./selinux/targeted/semanage.trans.LOCK</div><div class="line">./security/opasswd</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找usrbin权限为777的文件"><a href="#查找-usr-bin权限为777的文件" class="headerlink" title="查找/usr/bin权限为777的文件"></a>查找/usr/bin权限为777的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# find /usr/bin/ -perm 777</div><div class="line">/usr/bin/mailq</div><div class="line">/usr/bin/newaliases</div><div class="line">/usr/bin/rmail</div><div class="line">/usr/bin/slogin</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找所有suid的文件"><a href="#查找所有suid的文件" class="headerlink" title="查找所有suid的文件"></a>查找所有suid的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# find / -perm -4000 -print</div><div class="line">/usr/bin/crontab</div><div class="line">/usr/bin/passwd</div><div class="line">/usr/bin/sudo</div><div class="line">/usr/sbin/unix_chkpwd</div><div class="line">/usr/sbin/usernetctl</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下类型为文件但权限不能为777"><a href="#查找-etc目录下类型为文件-但权限不能为777" class="headerlink" title="查找/etc目录下类型为文件,但权限不能为777"></a>查找/etc目录下类型为文件,但权限不能为777</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find . -type f ! -perm 777</div><div class="line">./aliases.db</div><div class="line">./subgid</div><div class="line">./subuid</div><div class="line">./screenrc</div></pre></td></tr></table></figure>
<h2 id="查找所有可读的文件"><a href="#查找所有可读的文件" class="headerlink" title="查找所有可读的文件"></a>查找所有可读的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / -perm /u=r</div><div class="line">/home/beatrix/.bash_profile</div><div class="line">/home/beatrix/.bashrc</div><div class="line">/media</div><div class="line">/mnt</div><div class="line">/mnt/eeee</div></pre></td></tr></table></figure>
<h2 id="查找所有777权限的文件将权限改成644"><a href="#查找所有777权限的文件-将权限改成644" class="headerlink" title="查找所有777权限的文件,将权限改成644"></a>查找所有777权限的文件,将权限改成644</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / -type f -perm 0777 -print -exec chmod 644 &#123;&#125; +</div></pre></td></tr></table></figure>
<h2 id="删除所有mp3文件"><a href="#删除所有mp3文件" class="headerlink" title="删除所有mp3文件"></a>删除所有mp3文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find . -type f -name &quot;*.mp3&quot; -execdir rm -f &#123;&#125; +</div></pre></td></tr></table></figure>
<h2 id="查找大于1g的文件并删除"><a href="#查找大于1G的文件并删除" class="headerlink" title="查找大于1G的文件并删除"></a>查找大于1G的文件并删除</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]#  find / -size +1G -exec rm -rf &#123;&#125; \;</div></pre></td></tr></table></figure>
<h2 id="查找所有文件但不查找usr和boot目录"><a href="#查找所有文件但不查找-usr和-boot目录" class="headerlink" title="查找所有文件但不查找/usr和/boot目录"></a>查找所有文件但不查找/usr和/boot目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / \( -path &quot;/usr&quot; -o \</div><div class="line">-path &quot;/boot&quot; \) -prune -o -type f -print</div></pre></td></tr></table></figure>
<h2 id="同时执行两条命令查找suid和大于100m的文件并写入文件"><a href="#同时执行两条命令-查找suid和大于100M的文件并写入文件" class="headerlink" title="同时执行两条命令,查找suid和大于100M的文件并写入文件"></a>同时执行两条命令,查找suid和大于100M的文件并写入文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find / \( -perm -4000 -fprintf /root/suid.txt \) , \</div><div class="line">\( -size +100M -fprintf /root/big.txt \)</div></pre></td></tr></table></figure>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;作用&quot;&gt;&lt;a href=&quot;#作用&quot; class=&quot;headerlink&quot; title=&quot;作用&quot;&gt;&lt;/a&gt;作用&lt;/h1&gt;&lt;p&gt;find命令算是linux系统管理员必备的技能,它能通过文件名查找,时间查找,权限查找,用户查找,大小查找,文件类型查找等等,还支持正则表达
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>Linux的特殊权限</title>
    <link href="http://yoursite.com/2017/01/18/Linux%E7%9A%84%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90/"/>
    <id>http://yoursite.com/2017/01/18/Linux的特殊权限/</id>
    <published>2017-01-18T13:11:15.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是特殊权限"><a href="#什么是特殊权限" class="headerlink" title="什么是特殊权限"></a>什么是特殊权限</h1><pre><code>linux中出来常见的r,w,x,还有3个特殊权限,分别是setuid,setgid和stick bit.
</code></pre><h1 id="suid"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h1><p><strong>看看setuid有什么要求</strong></p>
<ol>
<li>SUID权限仅对二进制程序(binary program)有效；</li>
<li>执行者对于该程序需要具有x的可执行权限；</li>
<li>本权限仅在执行该程序的过程中有效(run-time)；</li>
<li>执行者将具有该程序拥有者(owner)的权限。</li>
</ol>
<h2 id="举个例子passwd命令看看passwd命令是谁的"><a href="#举个例子-passwd命令-看看passwd命令是谁的，" class="headerlink" title="举个例子,passwd命令,看看passwd命令是谁的，"></a>举个例子,passwd命令,看看passwd命令是谁的，</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-bash-4.2# ls -l /usr/bin/passwd</div><div class="line">-rwsr-xr-x. 1 root root 27832 1月  30 2014 /usr/bin/passwd</div><div class="line">执行权限x变成s</div></pre></td></tr></table></figure>
<p><strong>那么总结一下什么是setuid,本来没有执行权限的用户,以文件所属主的权限来执行.</strong></p>
<h2 id="如何设置"><a href="#如何设置" class="headerlink" title="如何设置"></a>如何设置</h2><p>可以执行下列命令:<br>例如我给touch命令加上suid:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# chmod u+s /usr/bin/touch</div><div class="line">#或者使用 chmod 4755 /usr/bin/touch #前面多一个4</div><div class="line">#注意要添加suid必须是可执行的文件,那么现在用touch创建一个文件,看看是谁创建的,</div><div class="line"></div><div class="line">[zhong@localhost zip]$ touch hallo</div><div class="line">[zhong@localhost zip]$ ls -al</div><div class="line">-rw-rw-r--. 1 root  zhong        0 1月  23 20:05 hallo</div><div class="line">#看是谁的,以防万一还是改回来吧</div></pre></td></tr></table></figure>
<h2 id="那么改回的命令有事什么呢"><a href="#那么改回的命令有事什么呢" class="headerlink" title="那么改回的命令有事什么呢"></a>那么改回的命令有事什么呢</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# chmod u-s /usr/bin/touch</div><div class="line"># 也可以用 chmod 0755 /usr/bin/touch</div><div class="line">[root@localhost zip]# ls -al /usr/bin/touch</div><div class="line">-rwxr-xr-x. 1 root root 62432 11月 20 2015 /usr/bin/touch</div></pre></td></tr></table></figure>
<h1 id="再来看看sgid"><a href="#再来看看SGID" class="headerlink" title="再来看看SGID"></a>再来看看SGID</h1><p>当s出现在目录或文件所属群的x权限上时，此时就称为SET GID简称SGID,那SGID对文件和目录分部有哪些功能呢？</p>
<ul>
<li>使用者若对于此目录具有 r 与 x 的权限时，该使用者能够进入此目录</li>
<li>使用者在此目录下的群组将会变成该目录的群组</li>
<li>若使用者在此目录下具有 w 的权限(可以新建文件)，则使用者所创建的新文件，该新文件的群组与此目录的群组相同</li>
</ul>
<h1 id="sgid对文件"><a href="#SGID对文件" class="headerlink" title="SGID对文件"></a>SGID对文件</h1><ul>
<li>SGID 对二进制可执行文件有效</li>
<li>程式执行者对于该文件来说，需具备 x 的权限</li>
<li>执行者在执行的过程中将会获得该文件群组的支援（用于改文件群组的权限）</li>
</ul>
<h2 id="sgid-用一个列子来说比较清晰"><a href="#sgid-用一个列子来说比较清晰" class="headerlink" title="sgid 用一个列子来说比较清晰"></a>sgid 用一个列子来说比较清晰</h2><h3 id="假设系统中有两个账号分别为mike和jone这两个用户除了自己的初始组外还共同支持一个project组假设两位用户都要在srvhome的目录下进行开发该目录不允许其他用户进入查看那么权限该怎么设置呢"><a href="#假设系统中有两个账号-分别为mike和jone-这两个用户除了自己的初始组外-还共同支持一个project组，假设两位用户都要在-srv-home的目录下进行开发-该目录不允许其他用户进入查看-那么权限该怎么设置呢" class="headerlink" title="假设系统中有两个账号,分别为mike和jone,这两个用户除了自己的初始组外,还共同支持一个project组，假设两位用户都要在/srv/home的目录下进行开发,该目录不允许其他用户进入查看.那么权限该怎么设置呢."></a>假设系统中有两个账号,分别为mike和jone,这两个用户除了自己的初始组外,还共同支持一个project组，假设两位用户都要在/srv/home的目录下进行开发,该目录不允许其他用户进入查看.那么权限该怎么设置呢.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# id mike</div><div class="line">uid=1001(mike) gid=1001(mike) groups=1001(mike)</div><div class="line">[root@localhost zip]# id jone</div><div class="line">uid=1002(jone) gid=1002(jone) groups=1002(jone)</div><div class="line"># 用户都存在</div><div class="line">[root@localhost zip]# groupadd project</div><div class="line"># 添加project组</div><div class="line"># 再把添加到project组</div><div class="line">[root@localhost zip]# usermod -a -G project mike</div><div class="line">[root@localhost zip]# usermod -a -G project jone</div><div class="line"># 创建项目目录</div><div class="line">[root@localhost zip]# mkdir /srv/home</div><div class="line"># 把所属组改为project</div><div class="line">[root@localhost zip]# chgrp project /srv/home/</div><div class="line"># 不允许其他用户进入,所以other组的权限是0</div><div class="line">[root@localhost zip]# chmod 770 /srv/home/</div><div class="line"># 那么我们现在看看权限是什么</div><div class="line">[root@localhost zip]# ls -al /srv/</div><div class="line">drwxrwx---.  2 root project    6 1月  23 20:46 home</div><div class="line"></div><div class="line"># 现在我们用mike用户进入目录并创建一个文件</div><div class="line">[root@localhost zip]# su mike</div><div class="line">[mike@localhost zip]$ cd /srv/home/</div><div class="line">[mike@localhost home]$ touch mike</div><div class="line"># 我们看看权限是谁</div><div class="line">[mike@localhost home]$ ls -al mike</div><div class="line">-rw-rw-r--. 1 mike mike 0 1月  23 20:53 mike</div><div class="line"># 那么试问,mike文件的属主,所属组是谁,jone账号能修改吗,答案是肯定不能写个的.</div><div class="line"># 下面SGID就该登场了</div><div class="line"></div><div class="line"># 我们给/srv/home加上SGID还是有两种加法</div><div class="line"># 也可以chmod g+s /srv/home</div><div class="line">[root@localhost zip]# chmod 2770 /srv/home/</div><div class="line">[root@localhost zip]# ls -l /srv/</div><div class="line">total 0</div><div class="line">drwxrws---. 2 root project 17 1月  23 20:53 home</div><div class="line"># 看所属组上多了一个s</div><div class="line"># 我们在用mike账号进到home目录下创建文件进行修改</div><div class="line"></div><div class="line">[root@localhost srv]# su mike</div><div class="line">[mike@localhost home]$ touch hallo</div><div class="line">[mike@localhost home]$ ls -al</div><div class="line">-rw-rw-r--. 1 mike project  0 1月  23 20:59 hallo</div><div class="line">-rw-rw-r--. 1 mike mike     0 1月  23 20:53 mike</div><div class="line"># 看属主是谁,所属组是谁,能修改否?这就是SGID的作用</div><div class="line"># 有一天,jone不高兴,把项目里所有的文件都删了,这可坏了事,那该怎样预防呢,这个时候Sticky Bit该上场了.</div></pre></td></tr></table></figure>
<h1 id="sticky-bit"><a href="#Sticky-Bit" class="headerlink" title="Sticky Bit"></a>Sticky Bit</h1><p>SBIT（Sticky Bit）目前只针对目录有效，对于目录的作用是：当用户在该目录下建立文件或目录时，仅有自己与 root才有权力删除。</p>
<p>看看tmp目录就是一个很好的例子,所有人都能在tmp目录里创建,但是只有root和自己能删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost srv]# ls -l /</div><div class="line">drwxrwxrwt.   7 root root 4096 1月  23 15:29 tmp</div><div class="line"># 看权限后面多一个t</div><div class="line"># 那么我们赶紧给项目加上sbit权限</div></pre></td></tr></table></figure>
<h2 id="添加sbit权限"><a href="#添加SBIT权限" class="headerlink" title="添加SBIT权限"></a>添加SBIT权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@localhost srv]# chmod 3770 home/</div><div class="line"># 或者使用chmod o+t /srv/home/</div><div class="line">[root@localhost srv]# ls -al</div><div class="line">drwxrws--T.  2 root project   29 1月  23 20:59 home</div><div class="line"># 看多了一个T</div><div class="line"></div><div class="line"># 那我进去高点破坏把</div><div class="line"></div><div class="line">[root@localhost srv]# su jone</div><div class="line">[jone@localhost srv]$ cd home/</div><div class="line"># 看看有谁呢</div><div class="line"></div><div class="line">[jone@localhost home]$ ls -al</div><div class="line">-rw-rw-r--. 1 mike project  0 1月  23 20:59 hallo</div><div class="line">-rw-rw-r--. 1 mike mike     0 1月  23 20:53 mike</div><div class="line"># 那删除一下试试呢</div><div class="line">[jone@localhost home]$ rm mike</div><div class="line">rm: remove write-protected regular empty file ‘mike’? y</div><div class="line">rm: cannot remove ‘mike’: Operation not permitted</div><div class="line"># 怎么会这样，再试试hallo</div><div class="line">[jone@localhost home]$ rm -f hallo</div><div class="line">rm: cannot remove ‘hallo’: Operation not permitted</div><div class="line"># 看还是删不掉,提示权限不够</div></pre></td></tr></table></figure>
<h1 id="以上就是linux的特殊权限"><a href="#以上就是Linux的特殊权限" class="headerlink" title="以上就是Linux的特殊权限."></a><strong>以上就是Linux的特殊权限.</strong></h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是特殊权限&quot;&gt;&lt;a href=&quot;#什么是特殊权限&quot; class=&quot;headerlink&quot; title=&quot;什么是特殊权限&quot;&gt;&lt;/a&gt;什么是特殊权限&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;linux中出来常见的r,w,x,还有3个特殊权限,分别是setuid,setgid
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>ACL权限详解</title>
    <link href="http://yoursite.com/2017/01/18/ACL%E6%9D%83%E9%99%90%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/18/ACL权限详解/</id>
    <published>2017-01-18T08:29:58.000Z</published>
    <updated>2017-05-04T02:55:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="acl简介"><a href="#ACL简介" class="headerlink" title="ACL简介"></a>ACL简介</h1><pre><code>**ACL**，就是**Access Control List**，一个文件/目录的访问控制列表，可以针对任意指定的用户/组分配RWX权限。使系统管理更加灵活。
</code></pre><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><pre><code>ACL需要内核核文件系统支持.内核2.6以上,EXT,JFS,XFS,Btrfs等文件系统都支持ACL.如今使用物理分区来体验ACL是不明智的,万一操作失误文件误删,损失就在了.所以本次采用loop设备
</code></pre><p>来替代.这样不需要很大空间,也不用单独分区.</p>
<h2 id="创建一个空白文件"><a href="#创建一个空白文件" class="headerlink" title="创建一个空白文件"></a>创建一个空白文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# dd if=/dev/zero of=extacl count=1024</div><div class="line">1024+0 records in</div><div class="line">1024+0 records out</div></pre></td></tr></table></figure>
<h2 id="用losetup将文件和一个loop连接起来"><a href="#用losetup将文件和一个loop连接起来" class="headerlink" title="用losetup将文件和一个loop连接起来."></a>用losetup将文件和一个loop连接起来.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# losetup /dev/loop0 extacl</div><div class="line">losetup: /dev/loop0: failed to set up loop device: No such file or directory</div><div class="line">报错了......,其时刚才我rm -rf /dev/loop0,所以新建一个就好了</div><div class="line">[root@localhost tmp]# mknod /dev/loop0 b 7 0</div><div class="line"># mknod</div><div class="line">[root@localhost tmp]# losetup /dev/loop0 extacl</div></pre></td></tr></table></figure>
<h2 id="创建文件系统创建ext4吧"><a href="#创建文件系统-创建ext4吧" class="headerlink" title="创建文件系统,创建ext4吧"></a>创建文件系统,创建ext4吧</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# mkfs.ext4 /dev/loop0</div></pre></td></tr></table></figure>
<h2 id="挂载文件系统"><a href="#挂载文件系统" class="headerlink" title="挂载文件系统"></a>挂载文件系统</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# mkdir /mnt/extacltest &amp;&amp; mount -o rw,acl /dev/loop0 /mnt/extacltest</div><div class="line">[root@localhost tmp]# cd /mnt/extacltest/</div></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><h2 id="新建一个文件查看acl权限gerfacl命令"><a href="#新建一个文件-查看ACL权限-gerfacl命令" class="headerlink" title="新建一个文件,查看ACL权限,gerfacl命令"></a>新建一个文件,查看ACL权限,gerfacl命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# touch file0</div><div class="line">[root@localhost extacltest]# ls -al</div><div class="line">-rw-r--r--. 1 root root     0 May  4 09:33 file0</div><div class="line"># 文件默认ACL</div><div class="line">[root@localhost extacltest]# getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::r--</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<p><em>注意即使在不支持ACL的情况下，getfacl仍然能返回一个这样的结果。不过setfacl是不能工作的。</em></p>
<h2 id="添加几个用户和组"><a href="#添加几个用户和组" class="headerlink" title="添加几个用户和组"></a>添加几个用户和组</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# groupadd teacher</div><div class="line">[root@localhost extacltest]# useradd mike</div><div class="line">[root@localhost extacltest]# useradd jone</div><div class="line">[root@localhost extacltest]# usermod -G teacher jone</div><div class="line">[root@localhost extacltest]# id jone</div><div class="line">uid=1002(jone) gid=1003(jone) groups=1003(jone),1001(teacher)</div><div class="line">[root@localhost extacltest]# id mike</div><div class="line">uid=1001(mike) gid=1002(mike) groups=1002(mike)</div></pre></td></tr></table></figure>
<h2 id="不用试也知道mike和jone不能写file0那我们通过setacl给file0添加一点权限"><a href="#不用试也知道-mike和jone不能写file0-那我们通过setacl给file0添加一点权限" class="headerlink" title="不用试也知道,mike和jone不能写file0,那我们通过setacl给file0添加一点权限"></a>不用试也知道,mike和jone不能写file0,那我们通过setacl给file0添加一点权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# setfacl -m u:mike:rw file0</div><div class="line"></div><div class="line">给mike添加了rw权限</div></pre></td></tr></table></figure>
<h2 id="切换到mike看看能不能写了"><a href="#切换到mike看看-能不能写了" class="headerlink" title="切换到mike看看,能不能写了"></a>切换到mike看看,能不能写了</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# su mike</div><div class="line">[mike@localhost extacltest]$ echo &apos;hello world&apos; &gt;&gt; file0</div><div class="line">[mike@localhost extacltest]$ cat file0</div><div class="line">hello world</div></pre></td></tr></table></figure>
<h2 id="现在来看看file0的权限"><a href="#现在来看看file0的权限" class="headerlink" title="现在来看看file0的权限"></a>现在来看看file0的权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[mike@localhost extacltest]$ ls -al file0</div><div class="line">-rw-rw-r--+ 1 root root 12 May  4 09:52 file0</div><div class="line"># 这最后的&apos;+&apos;,就说明了设置了ACL权限.</div><div class="line">[mike@localhost extacltest]$ getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">user:mike:rw-</div><div class="line">group::r--</div><div class="line">mask::rw-</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<p><strong>看到不同了吧</strong></p>
<h2 id="在修改试试为用户jone和teacher组添加权限"><a href="#在修改试试-为用户jone和teacher组添加权限" class="headerlink" title="在修改试试,为用户jone和teacher组添加权限"></a>在修改试试,为用户jone和teacher组添加权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# setfacl -m u:jone:rwx,g:teacher:r file0</div><div class="line">[root@localhost extacltest]# getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">user:mike:rw-</div><div class="line">user:jone:rwx</div><div class="line">group::r--</div><div class="line">group:teacher:r--</div><div class="line">mask::rwx</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<h2 id="再看看mask它代表能得到的最高权限"><a href="#再看看mask-它代表能得到的最高权限" class="headerlink" title="再看看mask,它代表能得到的最高权限"></a>再看看mask,它代表能得到的最高权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# setfacl -m mask::r file0</div><div class="line">root@localhost extacltest]# getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">user:mike:rw-           #effective:r--</div><div class="line">user:jone:rwx           #effective:r--</div><div class="line">group::r--</div><div class="line">group:teacher:r--</div><div class="line">mask::r--</div><div class="line">other::r--</div><div class="line"></div><div class="line"># 切换mike看看还能不能写,effective就是实际得到的权限</div><div class="line"></div><div class="line">[mike@localhost extacltest]$ echo &apos;hello ssss&apos; &gt;&gt; file0</div><div class="line">bash: file0: Permission denied</div></pre></td></tr></table></figure>
<p><strong>需要注意的是，每次修改或添加某个用户或组的ACL项的时候，mask都会随之修改以使最新的修改能够真正生效。所以如果需要一个比较严格的mask的话，可能需要每次都重新设置一下mask。</strong></p>
<h2 id="删除acl权限"><a href="#删除ACL权限" class="headerlink" title="删除ACL权限"></a>删除ACL权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">root@localhost extacltest]# setfacl -x u:mike file0</div><div class="line"># 删除单个权限</div><div class="line">[root@localhost extacltest]# setfacl -b file0</div><div class="line"># -b 全部删除</div><div class="line">[root@localhost extacltest]# getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::r--</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<h2 id="setfacl还有set选项用于全部都覆盖掉和-m不同-m只是修改或新增set回把原有的权限全部"><a href="#setfacl还有–set选项-用于全部都覆盖掉-和-m不同-m只是修改或新增-–set回把-原有的权限全部" class="headerlink" title="setfacl还有–set选项,用于全部都覆盖掉.和-m不同,-m只是修改或新增.–set回把,原有的权限全部"></a>setfacl还有–set选项,用于全部都覆盖掉.和-m不同,-m只是修改或新增.–set回把,原有的权限全部</h2><p>删除,用新的代替,需要注意的是一定要包含UGO的设置.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# setfacl --set u::rw,g::rw,o::- file0</div><div class="line">[root@localhost extacltest]# getfacl file0</div><div class="line"># file: file0</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::rw-</div><div class="line">other::---</div></pre></td></tr></table></figure>
<h2 id="目录的默认acl"><a href="#目录的默认ACL" class="headerlink" title="目录的默认ACL"></a>目录的默认ACL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"># 这是最开始没有ACL</div><div class="line">[root@localhost extacltest]# getfacl test1/</div><div class="line"># file: test1/</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rwx</div><div class="line">group::r-x</div><div class="line">other::r-x</div><div class="line"></div><div class="line">[root@localhost extacltest]# setfacl -d --set g:teacher:rwx test1/</div><div class="line"># 设置之后</div><div class="line">[root@localhost extacltest]# getfacl test1/</div><div class="line"># file: test1/</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rwx</div><div class="line">group::r-x</div><div class="line">other::r-x</div><div class="line">default:user::rwx</div><div class="line">default:group::r-x</div><div class="line">default:group:teacher:rwx</div><div class="line">default:mask::rwx</div><div class="line">default:other::r-x</div></pre></td></tr></table></figure>
<h2 id="自动继承目录的acl"><a href="#自动继承目录的ACL" class="headerlink" title="自动继承目录的ACL"></a>自动继承目录的ACL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# touch test1/file1</div><div class="line">[root@localhost extacltest]# getfacl test1/file1</div><div class="line"># file: test1/file1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::r-x          #effective:r--</div><div class="line">group:teacher:rwx       #effective:rw-</div><div class="line">mask::rw-</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<h2 id="备份acl"><a href="#备份ACL" class="headerlink" title="备份ACL"></a>备份ACL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# getfacl -R test1/ &gt; test1.acl</div><div class="line">[root@localhost extacltest]# cat test1.acl</div><div class="line"># file: test1/</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rwx</div><div class="line">group::r-x</div><div class="line">other::r-x</div><div class="line">default:user::rwx</div><div class="line">default:group::r-x</div><div class="line">default:group:teacher:rwx</div><div class="line">default:mask::rwx</div><div class="line">default:other::r-x</div><div class="line"></div><div class="line"># file: test1//file1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::r-x  #effective:r--</div><div class="line">group:teacher:rwx   #effective:rw-</div><div class="line">mask::rw-</div><div class="line">other::r--</div><div class="line"></div><div class="line"># 删除ACL权限</div><div class="line"></div><div class="line">[root@localhost extacltest]# setfacl -R -b test1</div><div class="line">[root@localhost extacltest]# getfacl test1</div><div class="line"># file: test1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rwx</div><div class="line">group::r-x</div><div class="line">other::r-x</div></pre></td></tr></table></figure>
<h2 id="恢复acl"><a href="#恢复ACL" class="headerlink" title="恢复ACL"></a>恢复ACL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost extacltest]# setfacl --restore test1.acl</div><div class="line">[root@localhost extacltest]# getfacl -R test1</div><div class="line"># file: test1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rwx</div><div class="line">group::r-x</div><div class="line">other::r-x</div><div class="line">default:user::rwx</div><div class="line">default:group::r-x</div><div class="line">default:group:teacher:rwx</div><div class="line">default:mask::rwx</div><div class="line">default:other::r-x</div><div class="line"></div><div class="line"># file: test1/file1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">group::r-x          #effective:r--</div><div class="line">group:teacher:rwx       #effective:rw-</div><div class="line">mask::rw-</div><div class="line">other::r--</div></pre></td></tr></table></figure>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><pre><code>ACL的引入使得Linux的权限管理更灵活,对于大量文件可以更有效的管理.无论多复杂的系统,文件系统的权限管理
</code></pre><p>都是最基础的内容.Linux对ACL的支持,为系统管理又添一把利器.</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;acl简介&quot;&gt;&lt;a href=&quot;#ACL简介&quot; class=&quot;headerlink&quot; title=&quot;ACL简介&quot;&gt;&lt;/a&gt;ACL简介&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;**ACL**，就是**Access Control List**，一个文件/目录的访问控制列表，可
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>awk命令详解</title>
    <link href="http://yoursite.com/2017/01/14/awk%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/14/awk命令详解/</id>
    <published>2017-01-14T01:33:45.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是awk"><a href="#什么是awk" class="headerlink" title="什么是awk"></a>什么是awk</h1><blockquote>
<p>AWK是一种优良的文本处理工具,Linux及Unix环境中现有的功能最强大的数据处理引擎之一.AWK提供了极其强大的功能:可以进行正则表达式的匹配,样式装入、流控制、数学运算符、进程控制语句甚至于内置的变量和函数.它具备了一个完整的语言所应具有的几乎所有精美特性.它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表,还有无数其他的功能.</p>
</blockquote>
<h1 id="awk工作流"><a href="#awk工作流" class="headerlink" title="awk工作流"></a>awk工作流</h1><p>awk遵循了非常简单的工作流,读取-执行-重复.<br><img src="/images/awk_workflow.jpg" alt="awk工作流"></p>
<h1 id="內建变量"><a href="#內建变量" class="headerlink" title="內建变量"></a>內建变量</h1><p>$0   | 当前记录（这个变量中存放着整个行的内容）<br>$1~$n  |  当前记录的第n个字段，字段间由FS分隔<br>FS  | 输入字段分隔符 默认是空格或Tab<br>NF   | 当前记录中的字段个数，就是有多少列<br>NR  |  已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。<br>FNR  | 当前记录数，与NR不同的是，这个值会是各个文件自己的行号<br>RS  |  输入的记录分隔符， 默认为换行符<br>OFS  | 输出字段分隔符， 默认也是空格<br>ORS  | 输出的记录分隔符，默认为换行符<br>FILENAME   |   当前输入文件的名字</p>
<h1 id="怎么用呢"><a href="#怎么用呢" class="headerlink" title="怎么用呢?"></a>怎么用呢?</h1><h2 id="假设我们有个文件empdata里面的内容"><a href="#假设我们有个文件emp-data-里面的内容" class="headerlink" title="假设我们有个文件emp.data,里面的内容:"></a>假设我们有个文件emp.data,里面的内容:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">姓名  时薪   工作时间</div><div class="line">Beth	4.00	0</div><div class="line">Dan	    3.75	0</div><div class="line">kathy	4.00	10</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div></pre></td></tr></table></figure>
<h2 id="要求把第一列名提取出来"><a href="#要求-把第一列名提取出来" class="headerlink" title="要求:把第一列名提取出来"></a>要求:把第一列名提取出来</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">该文件使用空格做分隔符,所有直接用$1打印</div><div class="line">那么$2就是第二列,$3就是第三列,$0就是整列</div><div class="line">awk &apos;&#123;print $1&#125;&apos; emp.data</div><div class="line"></div><div class="line">## 输出</div><div class="line">姓名</div><div class="line">Beth</div><div class="line">Dan</div><div class="line">kathy</div><div class="line">Mark</div><div class="line">Mary</div><div class="line">Susie</div><div class="line">zhong</div><div class="line">aquarius</div></pre></td></tr></table></figure>
<h2 id="再来筛选一下数据我们只要工作时间大于10的人"><a href="#再来筛选一下数据-我们只要工作时间大于10的人" class="headerlink" title="再来筛选一下数据,我们只要工作时间大于10的人"></a>再来筛选一下数据,我们只要工作时间大于10的人</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">分析:工作时间就是$3&gt;10就OK了,$0输出整列</div><div class="line">awk &apos;$3 &gt; 10 &#123;print $0&#125;&apos; emp.data</div><div class="line"></div><div class="line">姓名    时薪    工作时间</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div></pre></td></tr></table></figure>
<h2 id="那么再来计算一下他们一共拿了多少钱并且不计算工作时间小于10小时的"><a href="#那么再来计算一下-他们一共拿了多少钱-并且不计算工作时间小于10小时的" class="headerlink" title="那么再来计算一下,他们一共拿了多少钱,并且不计算工作时间小于10小时的"></a>那么再来计算一下,他们一共拿了多少钱,并且不计算工作时间小于10小时的</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">直接第二列乘第三列就行了</div><div class="line">awk &apos;$3 &gt; 10 &#123;print $0,$2 * $3&#125;&apos; emp.data</div><div class="line"></div><div class="line">输出</div><div class="line"></div><div class="line">Mark	5.00	20   100</div><div class="line">Mary	5.50	22   121</div><div class="line">Susie	4.25	18   76.5</div><div class="line">zhong   7.8		50   390</div><div class="line">aquarius  8.8   100  880</div></pre></td></tr></table></figure>
<h2 id="再来介绍begin和end都必须大写哦"><a href="#再来介绍BEGIN和END-都必须大写哦" class="headerlink" title="再来介绍BEGIN和END(都必须大写哦)"></a>再来介绍BEGIN和END(都必须大写哦)</h2><p>对,没错,BEGIN就是开始的意思,END就是最后<br>我不喜欢第一行,想把它换成英文的<br>再在最后一行加上一句I love you,那该怎么做呢?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">awk &apos;BEGIN&#123;print &quot;name\t rate\t time&quot;&#125; NR&gt;1&#123;print $0&#125; END&#123;print &quot;I love you\n&quot;&#125;&apos; emp.data</div><div class="line"></div><div class="line">name	 rate	 time</div><div class="line">Beth	4.00	0</div><div class="line">Dan	    3.75	0</div><div class="line">kathy	4.00	10</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div><div class="line">I love you</div></pre></td></tr></table></figure></p>
<h2 id="那么我们来指定一下分割符"><a href="#那么我们来指定一下分割符" class="headerlink" title="那么我们来指定一下分割符"></a>那么我们来指定一下分割符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">指定冒号为分隔符,打印了第一列,和最后一列</div><div class="line">awk -F: &apos;&#123;print $1,$NF&#125;&apos; /etc/passwd</div><div class="line"></div><div class="line">root /bin/bash</div><div class="line">daemon /usr/sbin/nologin</div><div class="line">bin /usr/sbin/nologin</div><div class="line">sys /usr/sbin/nologin</div><div class="line">sync /bin/sync</div><div class="line">games /usr/sbin/nologin</div><div class="line">man /usr/sbin/nologin</div><div class="line">lp /usr/sbin/nologin</div><div class="line">mail /usr/sbin/nologin</div><div class="line">news /usr/sbin/nologin</div><div class="line">uucp /usr/sbin/nologin</div><div class="line">proxy /usr/sbin/nologin</div><div class="line">www-data /usr/sbin/nologin</div><div class="line">backup /usr/sbin/nologin</div><div class="line">list /usr/sbin/nologin</div><div class="line">irc /usr/sbin/nologin</div><div class="line">......</div></pre></td></tr></table></figure>
<h1 id="以上就是awk的基本用法如有不妥欢迎指教"><a href="#以上就是awk的基本用法-如有不妥欢迎指教" class="headerlink" title="以上就是awk的基本用法,如有不妥欢迎指教."></a>以上就是awk的基本用法,如有不妥欢迎指教.</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是awk&quot;&gt;&lt;a href=&quot;#什么是awk&quot; class=&quot;headerlink&quot; title=&quot;什么是awk&quot;&gt;&lt;/a&gt;什么是awk&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;AWK是一种优良的文本处理工具,Linux及Unix环境中现有的功能最强大的数据处
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>shell编程--参数替换</title>
    <link href="http://yoursite.com/2017/01/13/shell%E7%BC%96%E7%A8%8B-%E5%8F%82%E6%95%B0%E6%9B%BF%E6%8D%A2/"/>
    <id>http://yoursite.com/2017/01/13/shell编程-参数替换/</id>
    <published>2017-01-13T13:21:55.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="参数替换"><a href="#参数替换" class="headerlink" title="参数替换"></a>参数替换</h3><hr>
<h2 id="parameter"><a href="#parameter" class="headerlink" title="${parameter}"></a>${parameter}</h2><p>与$parameter相同,在某些上下文中,${paramter}很少产生混淆.</p>
<h2 id="parameter-defaultparameter-default这里有个天坑"><a href="#parameter-default-parameter-default-这里有个天坑" class="headerlink" title="${parameter-default},${parameter:-default}这里有个天坑"></a>${parameter-default},${parameter:-default}这里有个天坑</h2><p>${parameter-default} – 如果变量parameter没有声明,那么就是用默认值.<br>${parameter:-default} – 如果变量parameter没有声明,那么就是用默认值.<br><strong>在绝大多数的情况下都是相同的.只有在parameter已经声明,但值为null得时候,才会产生不一样的结构.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">username0=</div><div class="line">echo &quot;username0 has been declared, but is set to null.&quot;</div><div class="line">echo &quot;username0 = $&#123;username0-`whoami`&#125;&quot;</div><div class="line"># 不会有输出. 12</div><div class="line">echo</div><div class="line">echo username1 has not been declared.</div><div class="line">echo &quot;username1 = $&#123;username1-`whoami`&#125;&quot;</div><div class="line"># 将会输出默认值. 18</div><div class="line">username2=</div><div class="line">echo &quot;username2 has been declared, but is set to null.&quot;</div><div class="line">echo &quot;username2 = $&#123;username2:-`whoami`&#125;&quot;</div><div class="line"># ^</div><div class="line"># 会输出, 因为:-会比-多一个条件测试. 24 # 可以与上边的例子比较一下. 25</div><div class="line"></div><div class="line">#</div><div class="line"></div><div class="line"># 再来一个:</div><div class="line"></div><div class="line">variable=</div><div class="line"># 变量已经被声明, 但是设为空值. 33</div><div class="line">echo &quot;$&#123;variable-0&#125;&quot; # (没有输出)</div><div class="line">echo &quot;$&#123;variable:-1&#125;&quot; # 1</div><div class="line"></div><div class="line">unset variable</div><div class="line"></div><div class="line">echo &quot;$&#123;variable-2&#125;&quot; # 2</div><div class="line">echo &quot;$&#123;variable:-3&#125;&quot; # 3</div><div class="line"></div><div class="line"># 如果脚本没有接收来自命令行的参数,那么默认参数结构将会提供一个默认值给脚本</div><div class="line"></div><div class="line">DEFAULT_FILENAME=hallo.txt</div><div class="line">filename=$&#123;1:-$DEFAULT_FILENAME&#125;</div><div class="line"># 如果没有指定值, 那么下面的代码块将会使用filename</div></pre></td></tr></table></figure>
<h2 id="parameterdefaultparameterdefault"><a href="#parameter-default-parameter-default" class="headerlink" title="${parameter=default},${parameter:=default}"></a>${parameter=default},${parameter:=default}</h2><p>${parameter=default} – 如果parameter没有声明,那么就把它的值设为default.<br>${parameter:=default} – 如果parameter没有声明,那么就把它的值设为default</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo $&#123;username=`whoami`&#125;</div><div class="line"># 变量&quot;username&quot;现在被赋值为`whoami`.</div></pre></td></tr></table></figure>
<h2 id="parameteralt_value-parameteralt_value"><a href="#parameter-alt-value-parameter-alt-value" class="headerlink" title="${parameter+alt_value}, ${parameter:+alt_value}"></a>${parameter+alt_value}, ${parameter:+alt_value}</h2><p>${parameter+alt_value} – 如果变量parameter被声明了, 那么就使用alt_value, 否则就使用<br>null字符串.<br>${parameter:+alt_value} – 如果变量parameter被设置了, 那么就使用alt_value, 否则就使用<br>null字符串.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">a=$&#123;param1+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"></div><div class="line">param2=</div><div class="line">a=$&#123;param2+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div><div class="line"></div><div class="line">param3=123</div><div class="line">a=$&#123;param3+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div><div class="line"></div><div class="line">echo</div><div class="line">echo &quot;###### \$&#123;parameter:+alt_value&#125; ########&quot;</div><div class="line">echo</div><div class="line"></div><div class="line">a=$&#123;param4:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"></div><div class="line">param5=</div><div class="line">a=$&#123;param5:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"># 产生与a=$&#123;param5+xyz&#125;不同的结果. 26</div><div class="line">param6=123</div><div class="line">a=$&#123;param6:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div></pre></td></tr></table></figure>
<h2 id="parametererr_msg-parametererr_msg"><a href="#parameter-err-msg-parameter-err-msg" class="headerlink" title="${parameter?err_msg}, ${parameter:?err_msg}"></a>${parameter?err_msg}, ${parameter:?err_msg}</h2><p>${parameter?err_msg} – 如果parameter已经被声明, 那么就使用设置的值, 否则打印err_msg<br>错误消息.<br>${parameter:?err_msg} – 如果parameter已经被设置, 那么就使用设置的值, 否则打印<br>err_msg错误消息.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">: $&#123;HOSTNAME?&#125; $&#123;USER?&#125; $&#123;HOME?&#125; # $&#123;MAIL?&#125;</div><div class="line"></div><div class="line">echo</div><div class="line">echo &quot;Name of the machine is $HOSTNAME.&quot;</div><div class="line">echo &quot;You are $USER.&quot;</div><div class="line">echo &quot;Your home directory is $HOME.&quot;</div><div class="line">echo &quot;Your mail INBOX is located in $MAIL.&quot;</div><div class="line">echo</div><div class="line">echo &quot;If you are reading this message,&quot;</div><div class="line">echo &quot;critical environmental variables have been set.&quot;</div><div class="line">echo</div><div class="line">echo</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;参数替换&quot;&gt;&lt;a href=&quot;#参数替换&quot; class=&quot;headerlink&quot; title=&quot;参数替换&quot;&gt;&lt;/a&gt;参数替换&lt;/h3&gt;&lt;hr&gt;
&lt;h2 id=&quot;parameter&quot;&gt;&lt;a href=&quot;#parameter&quot; class=&quot;headerlink&quot; t
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>shell编程--条件判断</title>
    <link href="http://yoursite.com/2017/01/13/shell%E7%BC%96%E7%A8%8B-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/"/>
    <id>http://yoursite.com/2017/01/13/shell编程-条件判断/</id>
    <published>2017-01-13T11:55:46.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="if单分支语法"><a href="#if单分支语法" class="headerlink" title="if单分支语法"></a>if单分支语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">else</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">fi</div></pre></td></tr></table></figure>
<h1 id="if多分支语法"><a href="#if多分支语法" class="headerlink" title="if多分支语法"></a>if多分支语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">if 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">elif 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">elif 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">.......</div><div class="line"></div><div class="line">fi</div></pre></td></tr></table></figure>
<h1 id="条件判断中可以进行的测试"><a href="#条件判断中可以进行的测试" class="headerlink" title="条件判断中可以进行的测试"></a>条件判断中可以进行的测试</h1><hr>
<h2 id="条件测试方式"><a href="#条件测试方式" class="headerlink" title="条件测试方式"></a>条件测试方式</h2><ul>
<li>[expr]一个括弧里写表达式,但使用比较符号时,要加上逃逸字符,进行转义才行.</li>
<li>[[expr]]两个括弧里写表达式</li>
<li>test expr 关键字test</li>
<li>bash命令</li>
</ul>
<h2 id="条件测试的类型"><a href="#条件测试的类型" class="headerlink" title="条件测试的类型"></a>条件测试的类型</h2><p>整数测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-gt #greater than 大于</div><div class="line">-lt #less than 小于</div><div class="line">-ge #greater than or equal  大于等于</div><div class="line">-le #less than or equal 小于等于</div><div class="line">-eq #equal 等于</div></pre></td></tr></table></figure>
<p>字符测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;  大于</div><div class="line">&lt;  小于</div><div class="line">== 等于</div><div class="line">!= 不等</div><div class="line">-z 为空则为true</div><div class="line">-n 不为空为true</div></pre></td></tr></table></figure>
<p>文件测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">-e 文件是否存在</div><div class="line">-a 文件是否存在,同-e，已被弃用</div><div class="line">-f 表示这个文件是一个普通文件</div><div class="line">-s 文件大小部位零</div><div class="line">-d 表示这是个目录</div><div class="line">-b 表示这是一个块设备(软盘,光驱,....)</div><div class="line">-c 表示是一个字符设备(键盘,声卡,....)</div><div class="line">-p 这个文件是一个管道</div><div class="line">-h 这是一个符号链接</div><div class="line">-L 这是一个符号链接</div><div class="line">-S 表示是一个socket</div><div class="line">-t 文件(描述符)被关联到一个终端设备上</div><div class="line">这个测试选项一般被用来检测脚本中的stdin([ -t 0 ]) 或者stdout([ -t 1 ])是否来自于一个终端</div><div class="line">-r 文件是否有可读权限</div><div class="line">-w 文件是否有可写权限</div><div class="line">-x 文件是否有可执行权限</div><div class="line">-g 文件或目录是否设置sgid</div><div class="line">-u 文件或目录是否设置suid</div><div class="line">-k 是否设置粘贴位</div><div class="line">-O 判断你是否是文件的拥有者</div><div class="line">-G 文件的gid是否与你相等</div><div class="line">-N 从文件到上次被读取到现在为止,文件是否被修改过</div><div class="line">f1 -nt f2 文件f1比文件f2新</div><div class="line">f1 -ot f2 文件f1比文件f2旧</div><div class="line">f1 -ef f2 文件f1和文件是相同文件的硬链接</div><div class="line">! 取反</div></pre></td></tr></table></figure>
<p>其他</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-a 逻辑与</div><div class="line">exp1 -a exp2 如果表达式exp1和exp2都为真,结果才为真</div><div class="line"></div><div class="line">-o 逻辑或</div><div class="line">exp1 -o exp2 如果表达式exp1和exp2至少一个为真,那么结果为真.</div></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>判断当前用户是否为管理员,是则输出是管理员,否则输出是普通用户.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">ROOT_UID=0</div><div class="line"># bash 内置变量可以直接引用</div><div class="line">if [ &quot;$UID&quot; -ne &quot;$ROOT_ID&quot; ]</div><div class="line">then</div><div class="line">	echo &quot;The User is common user&quot;</div><div class="line">else</div><div class="line">	echo &quot;The user is root&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>写一个脚本,生成两个随机数,比较其大小,输出较大的数.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">A=$RANDOM</div><div class="line">B=$RANDOM</div><div class="line"># 一定要主要表达式两端的空格</div><div class="line">if [[ $A &gt; $B ]]</div><div class="line">then</div><div class="line">	echo &quot;A greater than B.&quot;</div><div class="line">else</div><div class="line">	echo &quot;B greater than A.&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>字符串比较是比较其ASCII中的位置,第一位相同往后移比较.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">if [ &quot;A&quot; \&gt;  &quot;B&quot; ]</div><div class="line">then</div><div class="line">	echo &quot;A greater than B&quot;</div><div class="line">else</div><div class="line">	echo &quot;B greater than A&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;if单分支语法&quot;&gt;&lt;a href=&quot;#if单分支语法&quot; class=&quot;headerlink&quot; title=&quot;if单分支语法&quot;&gt;&lt;/a&gt;if单分支语法&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>cut命令详解</title>
    <link href="http://yoursite.com/2017/01/12/cut%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/12/cut命令详解/</id>
    <published>2017-01-12T14:12:08.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>cut主要是用来分割文件中的字符串，并且根据要求进行显示的一个命令。虽然他的用法基本上都可以用其他的linux命令所代替，但是用cut会更方便一点。</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut(选项)(参数)</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-b：仅显示行中指定直接范围的内容；</div><div class="line">-c：仅显示行中指定范围的字符；</div><div class="line">-d：指定字段的分隔符，默认的字段分隔符为“TAB”；</div><div class="line">-f：显示指定字段的内容；</div><div class="line">-n：与“-b”选项连用，不分割多字节字符；</div><div class="line">--complement：补足被选择的字节、字符或字段；</div><div class="line">--out-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符； --help：显示指令的帮助信息；</div><div class="line">--version：显示指令的版本信息。</div></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><p>例如有一个学生报表信息，包含No、Name、Mark、Percent：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test.txt</div><div class="line">No  Name  Mark  Percent</div><div class="line">01  tom   69    91</div><div class="line">02  jack  71    87</div><div class="line">03  alex  68    98</div></pre></td></tr></table></figure>
<p>使用 -f 选项提取指定字段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f 1 test.txt</div><div class="line">No</div><div class="line">01</div><div class="line">02</div><div class="line">03</div><div class="line"></div><div class="line">[root@localhost text]# cut -f2,3 test.txt</div><div class="line">Name Mark</div><div class="line">tom  69</div><div class="line">jack 71</div><div class="line">alex 68</div></pre></td></tr></table></figure>
<p>–complement 选项提取指定字段之外的列（打印除了第二列之外的列）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f2 --complement test.txt</div><div class="line">No Mark Percent</div><div class="line">01 69   91</div><div class="line">02 71   87</div><div class="line">03 68   98</div></pre></td></tr></table></figure>
<p>使用 -d 选项指定字段分隔符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test2.txt</div><div class="line">No;  Name;   Mark;   Percent</div><div class="line">01;  tom;    69;     91</div><div class="line">02;  jack;   71;     87</div><div class="line">03;  alex;   68;     98</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f2 -d&quot;;&quot; test2.txt</div><div class="line">Name</div><div class="line">tom</div><div class="line">jack</div><div class="line">alex</div></pre></td></tr></table></figure>
<hr>
<h2 id="指定字段的字符或者字节范围"><a href="#指定字段的字符或者字节范围" class="headerlink" title="指定字段的字符或者字节范围"></a>指定字段的字符或者字节范围</h2><ul>
<li>N-：从第N个字节、字符、字段到结尾；</li>
<li>N-M：从第N个字节、字符、字段到第M个（包括M在内）字节、字符、字段；</li>
<li>-M：从第1个字节、字符、字段到第M个（包括M在内）字节、字符、字段。</li>
</ul>
<h2 id="上面是记法结合下面选项将摸个范围的字节-字符指定为字段"><a href="#上面是记法，结合下面选项将摸个范围的字节、字符指定为字段：" class="headerlink" title="上面是记法，结合下面选项将摸个范围的字节、字符指定为字段："></a>上面是记法，结合下面选项将摸个范围的字节、字符指定为字段：</h2><ul>
<li>-b 表示字节；</li>
<li>-c 表示字符；</li>
<li>-f 表示定义字段。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test.txt</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div></pre></td></tr></table></figure>
<p>打印第1个到第3个字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c1-3 test.txt</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div></pre></td></tr></table></figure>
<p>打印前2个字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c-2 test.txt</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div></pre></td></tr></table></figure>
<p>打印从第5个字符开始到结尾：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c5- test.txt</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;cut主要是用来分割文件中的字符串，并且根据要求进行显示的一个命令。虽然他的用法基本上都可以用其他的linux命令所代替，但是用cut会更方便一点。&lt;/p&gt;
&lt;h1 id=&quot;语法&quot;&gt;&lt;a href=&quot;#语法&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>tar命令详解</title>
    <link href="http://yoursite.com/2017/01/12/tar%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/12/tar命令详解/</id>
    <published>2017-01-12T13:58:43.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>tar命令可以为linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。 首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件。 为什么要区分这两个概念呢？这源于Linux中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（tar命令），然后再用压缩程序进行压缩（gzip bzip2命令）。</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar(选项)(参数)</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">-A或--catenate：新增文件到以存在的备份文件；</div><div class="line">-B：设置区块大小；</div><div class="line">-c或--create：建立新的备份文件；</div><div class="line">-C &lt;目录&gt;：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。</div><div class="line">-d：记录文件的差别；</div><div class="line">-x或--extract或--get：从备份文件中还原文件；</div><div class="line">-t或--list：列出备份文件的内容；</div><div class="line">-z或--gzip或--ungzip：通过gzip指令处理备份文件；</div><div class="line">-Z或--compress或--uncompress：通过compress指令处理备份文件；</div><div class="line">-f&lt;备份文件&gt;或--file=&lt;备份文件&gt;：指定备份文件；</div><div class="line">-v或--verbose：显示指令执行过程；</div><div class="line">-r：添加文件到已经压缩的文件；</div><div class="line">-u：添加改变了和现有的文件到已经存在的压缩文件；</div><div class="line">-j：支持bzip2解压文件；</div><div class="line">-v：显示操作过程；</div><div class="line">-l：文件系统边界设置；</div><div class="line">-k：保留原有文件不覆盖；</div><div class="line">-m：保留文件不被覆盖；</div><div class="line">-w：确认压缩文件的正确性；</div><div class="line">-p或--same-permissions：用原来的文件权限还原文件；</div><div class="line">-P或--absolute-names：文件名使用绝对名称，不移除文件名称前的“/”号；</div><div class="line">-N &lt;日期格式&gt; 或 --newer=&lt;日期时间&gt;：只将较指定日期更新的文件保存到备份文件里；</div><div class="line">--exclude=&lt;范本样式&gt;：排除符合范本样式的文件。</div></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><hr>
<h2 id="将文件全部打包成tar包"><a href="#将文件全部打包成tar包：" class="headerlink" title="将文件全部打包成tar包："></a>将文件全部打包成tar包：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tar -cvf log.tar log2012.log 仅打包，不压缩！</div><div class="line">tar -zcvf log.tar.gz log2012.log 打包后，以 gzip 压缩</div><div class="line">tar -jcvf log.tar.bz2 log2012.log 打包后，以 bzip2 压缩</div></pre></td></tr></table></figure>
<blockquote>
<p>在选项f之后的文件档名是自己取的，我们习惯上都用 .tar 来作为辨识。 如果加z选项，则以.tar.gz或.tgz来代表gzip压缩过的tar包；如果加j选项，则以.tar.bz2来作为tar包名。</p>
</blockquote>
<h2 id="查阅上述tar包内有哪些文件"><a href="#查阅上述tar包内有哪些文件：" class="headerlink" title="查阅上述tar包内有哪些文件："></a>查阅上述tar包内有哪些文件：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -ztvf log.tar.gz</div></pre></td></tr></table></figure>
<blockquote>
<p>在预设的情况下，我们可以将压缩档在任何地方解开的</p>
</blockquote>
<h2 id="只将tar内的部分文件解压出来"><a href="#只将tar内的部分文件解压出来：" class="headerlink" title="只将tar内的部分文件解压出来："></a>只将tar内的部分文件解压出来：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf /opt/soft/test/log30.tar.gz log2013.log</div></pre></td></tr></table></figure>
<blockquote>
<p>我可以透过tar -ztvf来查阅 tar 包内的文件名称，如果单只要一个文件，就可以透过这个方式来解压部分文件！</p>
</blockquote>
<h2 id="文件备份下来并且保存其权限"><a href="#文件备份下来，并且保存其权限：" class="headerlink" title="文件备份下来，并且保存其权限："></a>文件备份下来，并且保存其权限：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zcvpf log31.tar.gz log2014.log log2015.log log2016.log</div></pre></td></tr></table></figure>
<blockquote>
<p>这个-p的属性是很重要的，尤其是当您要保留原本文件的属性时。</p>
</blockquote>
<h2 id="在文件夹当中比某个日期新的文件才备份"><a href="#在文件夹当中，比某个日期新的文件才备份：" class="headerlink" title="在文件夹当中，比某个日期新的文件才备份："></a>在文件夹当中，比某个日期新的文件才备份：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -N &quot;2012/11/13&quot; -zcvf log17.tar.gz test</div></pre></td></tr></table></figure>
<h2 id="其实最简单的使用-tar-就只要记忆底下的方式即可"><a href="#其实最简单的使用-tar-就只要记忆底下的方式即可：" class="headerlink" title="其实最简单的使用 tar 就只要记忆底下的方式即可："></a>其实最简单的使用 tar 就只要记忆底下的方式即可：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</div><div class="line">查　询：tar -jtv -f filename.tar.bz2</div><div class="line">解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录</div></pre></td></tr></table></figure>
<h2 id="归档文件时想排除某写文件不备份可以使用exclude-file"><a href="#归档文件时想排除某写文件不备份，可以使用–exclude-file" class="headerlink" title="归档文件时想排除某写文件不备份，可以使用–exclude file :"></a>归档文件时想排除某写文件不备份，可以使用–exclude file :</h2><p>例如：</p>
<p>我要归档/etc目录,但不想归档/etc/passwd文件,就可以这样写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# tar -zcvf etc.tar.gz /etc --exclude /etc/passwd</div><div class="line"># 还可以多个文件，目录同事排除</div><div class="line">[root@localhost zip]# tar -zcvf etc.tar.gz /etc --exclude /etc/passwd --exclude /etc/passwd-</div><div class="line"># 这样就可以排除多个文件</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;tar命令可以为linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>shell编程--特殊字符</title>
    <link href="http://yoursite.com/2017/01/12/shell%E7%BC%96%E7%A8%8B-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/"/>
    <id>http://yoursite.com/2017/01/12/shell编程-特殊字符/</id>
    <published>2017-01-12T12:11:47.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a><strong>特殊符号</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"># 井号,注释</div><div class="line">; 命令分隔符,可以在同一行写两个或者两个以上命令.</div><div class="line">;; 终止case选项[双分号,即;;]</div><div class="line">. ‘点’命令,等价于source命令</div><div class="line">. ‘点&apos;作为文件的一部分,如果放在文件名的开头的话,那么这个文件将会成为隐藏文件.</div><div class="line">&quot;&quot; 双引号,弱引用,可以使用变量替换,命令替换.</div><div class="line">&apos;&apos; 单引号,强引用,所有字符原封不动的输出.</div><div class="line">,  逗号,链接了一系列的算术操作,虽然里边所有的内用都被运行,但只有最后一项被返回.</div><div class="line">\  反斜线,转义符,一中对单字符的引用机制.</div><div class="line">/  文件路径分隔符,斜线,也可用来作为除法算术符.</div><div class="line">`` 命令替换,反引号,可以将命令赋值到变量.</div><div class="line">:  空命令,冒号,等价于“NOP”(no op,什么也不干),也可被认为与shell的内建命令true作用相同.</div><div class="line">!  取反操作符,叹号,！操作符将会反转命令的退出码,也会反转测试操作符的意义.</div><div class="line">*  通配符,星号,可以匹配给定目录下的所有文件.</div><div class="line">*  算术操作符,星号,表示乘法运算,**求幂运算.</div><div class="line">?  测试操作符,问号,在一个特定的表达式中,？表示测试一个条件的结构.</div><div class="line">?  通配符,用来匹配当字符,在正则表达式中,也是用来表示一个字符.</div><div class="line">$  变量替换,dollar符.</div><div class="line">$  行结束符,在正则表达式中,表示结束符.</div><div class="line">$&#123;&#125; 参数替换.</div><div class="line">$* 位置参数,表示所有参数,但$*被ka你做一个单词,引用是&quot;$*&quot;,必须用双引号.</div><div class="line">$@ 位置参数,都是所有参数,但$@每个参数都表示一个独立的字符串,也必须用&quot;$@&quot;.</div><div class="line">$?  退出码变量.</div><div class="line">$$  进程ID变量,保存了当前脚本的进程ID.</div><div class="line">$#  参数个数.</div><div class="line">shift  shift命令用于对参数的移动(左移).</div><div class="line">()  命令组,括号.</div><div class="line">&#123;&#125;  代码块,大括号,这个结构事实上创建了一个匿名函数.</div><div class="line">&#123;&#125;\ 路径名,一般在find命令中使用.</div><div class="line">[]  条件测试.</div><div class="line">[[]] 条件测试.</div><div class="line">[]  数组元素.</div><div class="line">[]  字符范围.</div><div class="line">(()) 整数扩展,可以计算整数.</div><div class="line">&lt;   输入重定向.</div><div class="line">&gt;   输出重定向.</div><div class="line">&gt;&gt;  输出追加重定向.</div><div class="line">|   管道,分析前边命令的输出,并将输出作为后面命令的输入.</div><div class="line">&gt;|  强制重定向,这将强制的覆盖现存文件.</div><div class="line">||  或-逻辑操作.在一个条件测试结构中,如果条件测试结构两边中的任意结果为True,||操作符就会返回0.</div><div class="line">&amp;   后台命令,一个命令后边跟一个&amp;，表示后台运行.</div><div class="line">&amp;&amp;  与-逻辑操作.在一个条件测试结构中,如果条件测试结构两边中结果为True的时候,&amp;&amp;操作符就会返回0</div><div class="line">-   选项,前缀,在所有命令没如果想使用参数的话,前边要加上&quot;-&quot;.</div><div class="line">-   用于重定向stdin或stdout.</div><div class="line">-   先前的工作目录.</div><div class="line">-   减号,算术操作.</div><div class="line">=   等号,赋值操作.</div><div class="line">+   加好,加法操作.</div><div class="line">+   选项,一个命令或者过滤器的选项标记.</div><div class="line">%   取模,算术操作.</div><div class="line">~   波浪号,当前用户的家目录.</div><div class="line">~+  当前工作目录.</div><div class="line">=~  正则表达式匹配.</div><div class="line">^   脱字符,正则表达式中的行首.</div></pre></td></tr></table></figure>
<h1 id="控制字符"><a href="#控制字符" class="headerlink" title="控制字符"></a><strong>控制字符</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Ctl-B  退格,非破坏性的,就是退格不删除前面的字符.</div><div class="line">Ctl-C  break,终结一个前台作业.</div><div class="line">Ctl-D  从一个shell登出.</div><div class="line">Ctl-G  老式的打字机终端上,它会响一下铃.</div><div class="line">Ctl-H  退格,破坏性的,退格删除前边的字符.</div><div class="line">Ctl-I  水平制表符.</div><div class="line">Ctl-J  重启一行.</div><div class="line">Ctl-K  垂直制表符.</div><div class="line">Ctl-L  清屏.</div><div class="line">Ctl-M  回城.</div><div class="line">Ctl-Q  回复,在终端中回复stdin.</div><div class="line">Ctl-S  挂起,在终端中冻结stdin.</div><div class="line">Ctl-V  当输入字符时,允许插入控制符.</div><div class="line">Ctl-u  删除光标到行首的所有字符.</div><div class="line">Ctl-W  删除光标前到最近一个空格的所有字符.</div><div class="line">Ctl-Z  暂停前台作业.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;特殊符号&quot;&gt;&lt;a href=&quot;#特殊符号&quot; class=&quot;headerlink&quot; title=&quot;特殊符号&quot;&gt;&lt;/a&gt;&lt;strong&gt;特殊符号&lt;/strong&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>shell编程--什么是shell</title>
    <link href="http://yoursite.com/2017/01/12/shell%E7%BC%96%E7%A8%8B-%E4%BB%80%E4%B9%88%E6%98%AFshell/"/>
    <id>http://yoursite.com/2017/01/12/shell编程-什么是shell/</id>
    <published>2017-01-12T11:10:55.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是shell"><a href="#什么是shell" class="headerlink" title="什么是shell"></a>什么是shell</h1><p>shell是程序,是用户和操作系统之间的接口程序.不仅仅有命令行shell,还有图形shell.</p>
<h1 id="为什么要用shell编程"><a href="#为什么要用shell编程" class="headerlink" title="为什么要用shell编程"></a>为什么要用shell编程</h1><p>可以完成一些相对简单的任务,易于配置,维护.缺点:效率不高.</p>
<h1 id="什么时候不适合使用shell脚本"><a href="#什么时候不适合使用shell脚本" class="headerlink" title="什么时候不适合使用shell脚本"></a>什么时候不适合使用shell脚本</h1><ul>
<li>资源密集型的任务,尤其在需要考虑时(比如,排序,hash等等)</li>
<li>需要处理大任务的数学操作,尤其是浮点操作,精确计算.</li>
<li>有夸平台移植需求.</li>
<li>复杂的应用,在必须使用结构话编程的时候.</li>
<li>至关重要的应用.</li>
<li>对于安全有很高的要求.</li>
<li>需要大规模文件操作.</li>
<li>工程的每个组成部分之间,需要连锁的依赖性.</li>
<li>需要多维数组的支持.</li>
<li>需要数据结构的支持.</li>
<li>需要产生操作系统硬件.</li>
<li>需要I/O或socket接口.</li>
<li>需要使用库或者遗留下来的旧代码的接口.</li>
<li>个人的,闭源的应用.</li>
</ul>
<h1 id="第一个shell脚本"><a href="#第一个shell脚本" class="headerlink" title="第一个shell脚本"></a>第一个shell脚本</h1><h2 id="带着一个sha-bang出发sha-bang指的是"><a href="#带着一个Sha-Bang出发-Sha-Bang指的是" class="headerlink" title="带着一个Sha-Bang出发(Sha-Bang指的是#!)"></a>带着一个Sha-Bang出发(Sha-Bang指的是#!)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo &quot;HalloWorld!&quot;</div></pre></td></tr></table></figure>
<h1 id="运行shell"><a href="#运行shell" class="headerlink" title="运行shell"></a>运行shell</h1><h2 id="第一种方法为脚本添加可执行权限"><a href="#第一种方法-为脚本添加可执行权限" class="headerlink" title="第一种方法,为脚本添加可执行权限"></a>第一种方法,为脚本添加可执行权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chmod +x test.sh</div><div class="line">./test.sh</div></pre></td></tr></table></figure>
<h2 id="第二种方法作为解释前的参数"><a href="#第二种方法-作为解释前的参数" class="headerlink" title="第二种方法,作为解释前的参数"></a>第二种方法,作为解释前的参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/bin/bash test.sh</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是shell&quot;&gt;&lt;a href=&quot;#什么是shell&quot; class=&quot;headerlink&quot; title=&quot;什么是shell&quot;&gt;&lt;/a&gt;什么是shell&lt;/h1&gt;&lt;p&gt;shell是程序,是用户和操作系统之间的接口程序.不仅仅有命令行shell,还有图形shel
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>sed命令详解</title>
    <link href="http://yoursite.com/2017/01/10/sed%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/10/sed命令详解/</id>
    <published>2017-01-10T14:12:26.000Z</published>
    <updated>2017-04-22T07:47:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a><strong>作用</strong></h1><blockquote>
<p>sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。</p>
</blockquote>
<h1 id="sed命令格式"><a href="#sed命令格式" class="headerlink" title="sed命令格式"></a><strong>sed命令格式</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed [options] &apos;command&apos; file(s)</div></pre></td></tr></table></figure>
<h1 id="sed选项"><a href="#sed选项" class="headerlink" title="sed选项"></a><strong>sed选项</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-e 以选项中指定的script来处理输入的文本文件；</div><div class="line"></div><div class="line">-f 以选项中指定的script文件来处理输入的文本文件；</div><div class="line"></div><div class="line">-i 直接修改读取的档案内容；</div><div class="line"></div><div class="line">-n 安静模式，仅显示处理后的结果；</div></pre></td></tr></table></figure>
<h1 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a><strong>sed命令</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">a 在当前行下面插入文本。</div><div class="line"></div><div class="line">i 在当前行上面插入文本。</div><div class="line"></div><div class="line">c 把选定的行改为新的文本。</div><div class="line"></div><div class="line">d 删除，删除选择的行。</div><div class="line"></div><div class="line">D 删除模板块的第一行。</div><div class="line"></div><div class="line">s 替换指定字符。</div><div class="line"></div><div class="line">h 拷贝模板块的内容到内存中的缓冲区。</div><div class="line"></div><div class="line">H 追加模板块的内容到内存中的缓冲区。</div><div class="line"></div><div class="line">g 获得内存缓冲区的内容，并替代当前模板块中的文本。</div><div class="line"></div><div class="line">G 获得内存缓冲区的内容，并追加到当前模板块文本的后面。</div><div class="line"></div><div class="line">l 列表不能打印字符的清单。</div><div class="line"></div><div class="line">n 读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。</div><div class="line"></div><div class="line">N 追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前</div><div class="line">行号码。</div><div class="line"></div><div class="line">p 打印模板块的行。</div><div class="line"></div><div class="line">P(大写) 打印模板块的第一行。</div><div class="line"></div><div class="line">q 退出Sed。</div><div class="line"></div><div class="line">b lable 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。</div><div class="line"></div><div class="line">r file 从file中读行。</div><div class="line"></div><div class="line">t label if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。</div><div class="line"></div><div class="line">T label 错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。</div><div class="line"></div><div class="line">w file 写并追加模板块到file末尾。</div><div class="line"></div><div class="line">W file 写并追加模板块的第一行到file末尾。</div><div class="line"></div><div class="line">! 表示后面的命令对所有没有被选定的行发生作用。</div><div class="line"></div><div class="line">= 打印当前行号码。</div><div class="line"></div><div class="line"># 把注释扩展到下一个换行符以前。</div></pre></td></tr></table></figure>
<h1 id="sed替换标记"><a href="#sed替换标记" class="headerlink" title="sed替换标记"></a><strong>sed替换标记</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">g 表示行内全面替换。</div><div class="line"></div><div class="line">p 表示打印行。</div><div class="line"></div><div class="line">w 表示把行写入一个文件。</div><div class="line"></div><div class="line">x 表示互换模板块中的文本和缓冲区中的文本。</div><div class="line"></div><div class="line">y 表示把一个字符翻译为另外的字符（但是不用于正则表达式）</div><div class="line"></div><div class="line">\1 子串匹配标记</div><div class="line"></div><div class="line">&amp; 已匹配字符串标记</div></pre></td></tr></table></figure>
<h1 id="sed元字符集"><a href="#sed元字符集" class="headerlink" title="sed元字符集"></a><strong>sed元字符集</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">^匹配行开始，如：/^sed/匹配所有以sed开头的行。</div><div class="line"></div><div class="line">$ 匹配行结束，如：/sed$/匹配所有以sed结尾的行。</div><div class="line">. 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d。</div><div class="line"></div><div class="line">* 匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。</div><div class="line"></div><div class="line">[] 匹配一个指定范围内的字符，如/[Ss]ed/匹配sed和Sed。</div><div class="line"></div><div class="line">[^] 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。</div><div class="line"></div><div class="line">\(..\) 匹配子串，保存匹配的字符，如s/\(love\)able/\1rs，loveable被替换成lovers。</div><div class="line">&amp; 保存搜索字符用来替换其他字符，如s/love/**&amp;**/，love这成**love**。</div><div class="line"></div><div class="line">\&lt; 匹配单词的开始，如:/\&lt;love/匹配包含以love开头的单词的行。</div><div class="line"></div><div class="line">\&gt; 匹配单词的结束，如/love\&gt;/匹配包含以love结尾的单词的行。</div><div class="line"></div><div class="line">x\&#123;m\&#125; 重复字符x，m次，如：/0\&#123;5\&#125;/匹配包含5个0的行。</div><div class="line"></div><div class="line">x\&#123;m,\&#125; 重复字符x，至少m次，如：/0\&#123;5,\&#125;/匹配至少有5个0的行。</div><div class="line"></div><div class="line">x\&#123;m,n\&#125; 重复字符x，至少m次，不多于n次，如：/0\&#123;5,10\&#125;/匹配5~10个0的行。</div></pre></td></tr></table></figure>
<h1 id="sed用法实例"><a href="#sed用法实例" class="headerlink" title="sed用法实例"></a><strong>sed用法实例</strong></h1><h2 id="替换文本中的字符串"><a href="#替换文本中的字符串" class="headerlink" title="替换文本中的字符串"></a><em>替换文本中的字符串</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;s/book/books/&apos; file</div></pre></td></tr></table></figure>
<h2 id="-n选项和p命令一起使用表示只打印那些发生替换的行"><a href="#n选项和p命令一起使用表示只打印那些发生替换的行" class="headerlink" title="-n选项和p命令一起使用表示只打印那些发生替换的行"></a><em>-n选项和p命令一起使用表示只打印那些发生替换的行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;s/test/TEST/p&apos; file</div></pre></td></tr></table></figure>
<h2 id="直接编辑文件选项-i会匹配file文件中每一行的第一个book替换为book"><a href="#直接编辑文件选项-i，会匹配file文件中每一行的第一个book替换为book" class="headerlink" title="直接编辑文件选项-i，会匹配file文件中每一行的第一个book替换为book"></a><em>直接编辑文件选项-i，会匹配file文件中每一行的第一个book替换为book</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i &apos;s/book/books/g&apos; file</div></pre></td></tr></table></figure>
<h2 id="使用后缀-g-标记会替换每一行中的所有匹配"><a href="#使用后缀-g-标记会替换每一行中的所有匹配" class="headerlink" title="使用后缀 /g 标记会替换每一行中的所有匹配"></a><em>使用后缀 /g 标记会替换每一行中的所有匹配</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;s/book/books/g&apos; file</div></pre></td></tr></table></figure>
<h2 id="当需要从第n处匹配开始替换时可以使用-ng"><a href="#当需要从第N处匹配开始替换时，可以使用-Ng" class="headerlink" title="当需要从第N处匹配开始替换时，可以使用 /Ng"></a><em>当需要从第N处匹配开始替换时，可以使用 /Ng</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">echo sksksksksksk | sed &apos;s/sk/SK/2g&apos; skSKSKSKSKSK</div><div class="line">echo sksksksksksk | sed &apos;s/sk/SK/3g&apos; skskSKSKSKSK</div><div class="line">echo sksksksksksk | sed &apos;s/sk/SK/4g&apos; skskskSKSKSK</div></pre></td></tr></table></figure>
<h2 id="以上命令中字符-在sed中作为定界符使用也可以使用任意的定界符"><a href="#以上命令中字符-在sed中作为定界符使用，也可以使用任意的定界符" class="headerlink" title="以上命令中字符 / 在sed中作为定界符使用，也可以使用任意的定界符"></a><em>以上命令中字符 / 在sed中作为定界符使用，也可以使用任意的定界符</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sed &apos;s:test:TEXT:g&apos;</div><div class="line">sed &apos;s|test|TEXT|g&apos;</div></pre></td></tr></table></figure>
<h2 id="定界符出现在样式内部时需要进行转义"><a href="#定界符出现在样式内部时，需要进行转义" class="headerlink" title="定界符出现在样式内部时，需要进行转义"></a><em>定界符出现在样式内部时，需要进行转义</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sed &apos;s/\/bin/\/usr\/local\/bin/g&apos;</div></pre></td></tr></table></figure>
<h2 id="删除空白行"><a href="#删除空白行" class="headerlink" title="删除空白行"></a><em>删除空白行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/^$/d&apos; file</div></pre></td></tr></table></figure>
<h2 id="删除文件的第2行"><a href="#删除文件的第2行" class="headerlink" title="删除文件的第2行"></a><em>删除文件的第2行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;2d&apos; file</div></pre></td></tr></table></figure>
<h2 id="删除文件的第2行到末尾所有行"><a href="#删除文件的第2行到末尾所有行" class="headerlink" title="删除文件的第2行到末尾所有行"></a><em>删除文件的第2行到末尾所有行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;2,$d&apos; file</div></pre></td></tr></table></figure>
<h2 id="删除文件最后一行"><a href="#删除文件最后一行" class="headerlink" title="删除文件最后一行"></a><em>删除文件最后一行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;$d&apos; file</div></pre></td></tr></table></figure>
<h2 id="删除文件中所有开头是test的行"><a href="#删除文件中所有开头是test的行" class="headerlink" title="删除文件中所有开头是test的行"></a><em>删除文件中所有开头是test的行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/^test/&apos;d file</div></pre></td></tr></table></figure>
<h2 id="正则表达式-w-匹配每一个单词使用-amp-替换它amp-对应于之前所匹配到的单词"><a href="#正则表达式-w-匹配每一个单词，使用-amp-替换它，-amp-对应于之前所匹配到的单词" class="headerlink" title="正则表达式 \w+ 匹配每一个单词，使用 [&amp;] 替换它，&amp; 对应于之前所匹配到的单词"></a><em>正则表达式 \w+ 匹配每一个单词，使用 [&amp;] 替换它，&amp; 对应于之前所匹配到的单词</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo this is a test line | sed &apos;s/\w\+/[&amp;]/g&apos; [this] [is] [a] [test] [line]</div></pre></td></tr></table></figure>
<h2 id="所有以19216801开头的行都会被替换成它自已加localhost"><a href="#所有以192-168-0-1开头的行都会被替换成它自已加localhost" class="headerlink" title="所有以192.168.0.1开头的行都会被替换成它自已加localhost"></a><em>所有以192.168.0.1开头的行都会被替换成它自已加localhost</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;s/^192.168.0.1/&amp;localhost/&apos; file 192.168.0.1localhost</div></pre></td></tr></table></figure>
<h2 id="匹配给定样式的其中一部分"><a href="#匹配给定样式的其中一部分" class="headerlink" title="匹配给定样式的其中一部分"></a><em>匹配给定样式的其中一部分</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo this is digit 7 in a number | sed &apos;s/digit \([0-9]\)/\1/&apos; this is 7 in a number</div></pre></td></tr></table></figure>
<h2 id="命令中-digit-7被替换成了-7-样式匹配到的子串是-7-用于匹配子串对于匹配到的第一个子串就标记为-1依此类推匹配到的第二个结果就是-2"><a href="#命令中-digit-7，被替换成了-7。样式匹配到的子串是-7，-用于匹配子串，对于匹配到的第一个子串就标记为-1，依此类推匹配到的第二个结果就是-2" class="headerlink" title="命令中 digit 7，被替换成了 7。样式匹配到的子串是 7，(..) 用于匹配子串，对于匹配到的第一个子串就标记为 \1，依此类推匹配到的第二个结果就是 \2"></a><em>命令中 digit 7，被替换成了 7。样式匹配到的子串是 7，(..) 用于匹配子串，对于匹配到的第一个子串就标记为 \1，依此类推匹配到的第二个结果就是 \2</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo aaa BBB | sed &apos;s/\([a-z]\+\) \([A-Z]\+\)/\2 \1/&apos; BBB aaa</div></pre></td></tr></table></figure>
<h2 id="love被标记为1所有loveable会被替换成lovers并打印出来"><a href="#love被标记为1，所有loveable会被替换成lovers，并打印出来" class="headerlink" title="love被标记为1，所有loveable会被替换成lovers，并打印出来"></a><em>love被标记为1，所有loveable会被替换成lovers，并打印出来</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;s/\(love\)able/\1rs/p&apos; file</div></pre></td></tr></table></figure>
<h2 id="组合多个表达式"><a href="#组合多个表达式" class="headerlink" title="组合多个表达式"></a><em>组合多个表达式</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sed &apos;表达式&apos; | sed &apos;表达式&apos;</div><div class="line"></div><div class="line"></div><div class="line">    等价于：</div><div class="line"></div><div class="line">sed &apos;表达式; 表达式&apos;</div></pre></td></tr></table></figure>
<h2 id="sed表达式可以使用单引号来引用但是如果表达式内部包含变量字符串就需要使用双引号"><a href="#sed表达式可以使用单引号来引用，但是如果表达式内部包含变量字符串，就需要使用双引号" class="headerlink" title="sed表达式可以使用单引号来引用，但是如果表达式内部包含变量字符串，就需要使用双引号"></a><em>sed表达式可以使用单引号来引用，但是如果表达式内部包含变量字符串，就需要使用双引号</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">test=hello</div><div class="line">echo hello WORLD | sed &quot;s/$test/HELLO&quot;</div><div class="line">HELLO WORLD</div></pre></td></tr></table></figure>
<h2 id="所有在模板test和check所确定的范围内的行都被打印"><a href="#所有在模板test和check所确定的范围内的行都被打印" class="headerlink" title="所有在模板test和check所确定的范围内的行都被打印"></a><em>所有在模板test和check所确定的范围内的行都被打印</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;/test/,/check/p&apos; file</div></pre></td></tr></table></figure>
<h2 id="打印从第5行开始到第一个包含以test开始的行之间的所有行"><a href="#打印从第5行开始到第一个包含以test开始的行之间的所有行" class="headerlink" title="打印从第5行开始到第一个包含以test开始的行之间的所有行"></a><em>打印从第5行开始到第一个包含以test开始的行之间的所有行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;5,/^test/p&apos; file</div></pre></td></tr></table></figure>
<h2 id="对于模板test和west之间的行每行的末尾用字符串aaa-bbb替换"><a href="#对于模板test和west之间的行，每行的末尾用字符串aaa-bbb替换" class="headerlink" title="对于模板test和west之间的行，每行的末尾用字符串aaa bbb替换"></a><em>对于模板test和west之间的行，每行的末尾用字符串aaa bbb替换</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/test/,/west/s/$/aaa bbb/&apos; file</div></pre></td></tr></table></figure>
<h2 id="-e选项允许在同一行里执行多条命令"><a href="#e选项允许在同一行里执行多条命令" class="headerlink" title="-e选项允许在同一行里执行多条命令"></a><em>-e选项允许在同一行里执行多条命令</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -e &apos;1,5d&apos; -e &apos;s/test/check/&apos; file</div></pre></td></tr></table></figure>
<h2 id="和-e-等价的命令是-expression"><a href="#和-e-等价的命令是-–expression" class="headerlink" title="和 -e 等价的命令是 –expression"></a><em>和 -e 等价的命令是 –expression</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed --expression=&apos;s/test/check/&apos; --expression=&apos;/love/d&apos; file</div></pre></td></tr></table></figure>
<h2 id="file里的内容被读进来显示在与test匹配的行后面如果匹配多行则file的内容将显示在所有匹配行的下面"><a href="#file里的内容被读进来，显示在与test匹配的行后面，如果匹配多行，则file的内容将显示在所有匹配行的下面" class="headerlink" title="file里的内容被读进来，显示在与test匹配的行后面，如果匹配多行，则file的内容将显示在所有匹配行的下面"></a><em>file里的内容被读进来，显示在与test匹配的行后面，如果匹配多行，则file的内容将显示在所有匹配行的下面</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/test/r file&apos; filename</div></pre></td></tr></table></figure>
<h2 id="在example中所有包含test的行都被写入file里"><a href="#在example中所有包含test的行都被写入file里" class="headerlink" title="在example中所有包含test的行都被写入file里"></a><em>在example中所有包含test的行都被写入file里</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;/test/w file&apos; example</div></pre></td></tr></table></figure>
<h2 id="将-this-is-a-test-line-追加到-以test-开头的行后面"><a href="#将-this-is-a-test-line-追加到-以test-开头的行后面" class="headerlink" title="将 this is a test line 追加到 以test 开头的行后面"></a><em>将 this is a test line 追加到 以test 开头的行后面</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/^test/a\this is a test line&apos; file</div></pre></td></tr></table></figure>
<h2 id="在-testconf-文件第2行之后插入-this-is-a-test-line"><a href="#在-test-conf-文件第2行之后插入-this-is-a-test-line" class="headerlink" title="在 test.conf 文件第2行之后插入 this is a test line"></a><em>在 test.conf 文件第2行之后插入 this is a test line</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i &apos;2a\this is a test line&apos; test.conf</div></pre></td></tr></table></figure>
<h2 id="将-this-is-a-test-line-追加到以test开头的行前面"><a href="#将-this-is-a-test-line-追加到以test开头的行前面" class="headerlink" title="将 this is a test line 追加到以test开头的行前面*"></a>将 this is a test line 追加到以test开头的行前面*</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/^test/i\this is a test line&apos; file</div></pre></td></tr></table></figure>
<h2 id="在testconf文件第5行之前插入this-is-a-test-line"><a href="#在test-conf文件第5行之前插入this-is-a-test-line" class="headerlink" title="在test.conf文件第5行之前插入this is a test line"></a><em>在test.conf文件第5行之前插入this is a test line</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i &apos;5i\this is a test line&apos; test.conf</div></pre></td></tr></table></figure>
<h2 id="如果test被匹配则移动到匹配行的下一行替换这一行的aa变为bb并打印该行然后继续"><a href="#如果test被匹配，则移动到匹配行的下一行，替换这一行的aa，变为bb，并打印该行，然后继续" class="headerlink" title="如果test被匹配，则移动到匹配行的下一行，替换这一行的aa，变为bb，并打印该行，然后继续"></a><em>如果test被匹配，则移动到匹配行的下一行，替换这一行的aa，变为bb，并打印该行，然后继续</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;/test/&#123; n; s/aa/bb/; &#125;&apos; file</div></pre></td></tr></table></figure>
<h2 id="把1~10行内所有abcde转变为大写注意正则表达式元字符不能使用这个命令"><a href="#把1-10行内所有abcde转变为大写，注意，正则表达式元字符不能使用这个命令" class="headerlink" title="把1~10行内所有abcde转变为大写，注意，正则表达式元字符不能使用这个命令"></a><em>把1~10行内所有abcde转变为大写，注意，正则表达式元字符不能使用这个命令</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;1,10y/abcde/ABCDE/&apos; file</div></pre></td></tr></table></figure>
<h2 id="打印完第10行后退出sed"><a href="#打印完第10行后，退出sed" class="headerlink" title="打印完第10行后，退出sed"></a><em>打印完第10行后，退出sed</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed &apos;10q&apos; file</div></pre></td></tr></table></figure>
<h2 id="在sed处理文件的时候每一行都被保存在一个叫模式空间的临时缓冲区中除非行被删除或者输出被取消否则所有被处理的行都将-打印在屏幕上-接着模式空间被清空并存入新的一行等待处理"><a href="#在sed处理文件的时候，每一行都被保存在一个叫模式空间的临时缓冲区中，除非行被删除或者输出被取消，否则所有被处理的行都将-打印在屏幕上。接着模式空间被清空，并存入新的一行等待处理" class="headerlink" title="在sed处理文件的时候，每一行都被保存在一个叫模式空间的临时缓冲区中，除非行被删除或者输出被取消，否则所有被处理的行都将 打印在屏幕上。接着模式空间被清空，并存入新的一行等待处理"></a><em>在sed处理文件的时候，每一行都被保存在一个叫模式空间的临时缓冲区中，除非行被删除或者输出被取消，否则所有被处理的行都将 打印在屏幕上。接着模式空间被清空，并存入新的一行等待处理</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -e &apos;/test/h&apos; -e &apos;$G&apos; file</div></pre></td></tr></table></figure>
<h2 id="互换模式空间和保持缓冲区的内容-也就是把包含test与check的行互换"><a href="#互换模式空间和保持缓冲区的内容。也就是把包含test与check的行互换" class="headerlink" title="互换模式空间和保持缓冲区的内容。也就是把包含test与check的行互换"></a><em>互换模式空间和保持缓冲区的内容。也就是把包含test与check的行互换</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -e &apos;/test/h&apos; -e &apos;/check/x&apos; file</div></pre></td></tr></table></figure>
<h2 id="sed脚本是一个sed的命令清单启动sed时以-f选项引导脚本文件名-sed对于脚本中输入的命令非常挑剔在命令的末尾不能有任何空白或文本如果在一行中有多个命令要用分号分隔-以开头的行为注释行且不能跨行"><a href="#sed脚本是一个sed的命令清单，启动Sed时以-f选项引导脚本文件名。Sed对于脚本中输入的命令非常挑剔，在命令的末尾不能有任何空白或文本，如果在一行中有多个命令，要用分号分隔。以-开头的行为注释行，且不能跨行" class="headerlink" title="sed脚本是一个sed的命令清单，启动Sed时以-f选项引导脚本文件名。Sed对于脚本中输入的命令非常挑剔，在命令的末尾不能有任何空白或文本，如果在一行中有多个命令，要用分号分隔。以#开头的行为注释行，且不能跨行"></a><em>sed脚本是一个sed的命令清单，启动Sed时以-f选项引导脚本文件名。Sed对于脚本中输入的命令非常挑剔，在命令的末尾不能有任何空白或文本，如果在一行中有多个命令，要用分号分隔。以#开头的行为注释行，且不能跨行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed [options] -f scriptfile file(s)</div></pre></td></tr></table></figure>
<h2 id="打印奇数行或偶数行"><a href="#打印奇数行或偶数行" class="headerlink" title="打印奇数行或偶数行"></a><em>打印奇数行或偶数行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sed -n &apos;p;n&apos; test.txt  #奇数行</div><div class="line">sed -n &apos;n;p&apos; test.txt  #偶数行</div><div class="line"></div><div class="line"></div><div class="line">sed -n &apos;1~2p&apos; test.txt  #奇数行</div><div class="line">sed -n &apos;2~2p&apos; test.txt  #偶数行</div></pre></td></tr></table></figure>
<h2 id="打印匹配字符串的下一行"><a href="#打印匹配字符串的下一行" class="headerlink" title="打印匹配字符串的下一行"></a><em>打印匹配字符串的下一行</em></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">grep -A 1 SCC URFILE</div><div class="line">sed -n &apos;/SCC/&#123;n;p&#125;&apos; URFILE</div><div class="line">awk &apos;/SCC/&#123;getline; print&#125;&apos; URFILE</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;作用&quot;&gt;&lt;a href=&quot;#作用&quot; class=&quot;headerlink&quot; title=&quot;作用&quot;&gt;&lt;/a&gt;&lt;strong&gt;作用&lt;/strong&gt;&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="command" scheme="http://yoursite.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>2017年的点点滴滴</title>
    <link href="http://yoursite.com/2017/01/10/2017%E5%B9%B4%E7%9A%84%E7%82%B9%E7%82%B9%E6%BB%B4%E6%BB%B4/"/>
    <id>http://yoursite.com/2017/01/10/2017年的点点滴滴/</id>
    <published>2017-01-10T12:37:57.000Z</published>
    <updated>2017-05-03T23:37:30.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="从你的全世界路过"><a href="#从你的全世界路过" class="headerlink" title="从你的全世界路过"></a>从你的全世界路过</h1><pre><code>2017年1月5日,在高铁上看完,很平凡,很感动.
</code></pre><h1 id="初恋这件小事"><a href="#初恋这件小事" class="headerlink" title="初恋这件小事"></a>初恋这件小事</h1><pre><code>2017年1月6日,happy ending!!!
</code></pre><h1 id="无间道系列"><a href="#无间道系列" class="headerlink" title="无间道系列"></a>无间道系列</h1><pre><code>2017年1月8日,继无间道，窃听风云之后，再无港片.
</code></pre><h1 id="魔鬼经济学3"><a href="#魔鬼经济学3" class="headerlink" title="魔鬼经济学3"></a>魔鬼经济学3</h1><pre><code>2017年1月10日,魔鬼的思维.
</code></pre><h1 id="天使爱美丽"><a href="#天使爱美丽" class="headerlink" title="天使爱美丽"></a>天使爱美丽</h1><pre><code>2017年1月12日,如果没有你,良辰美景更与和人说.
</code></pre><h1 id="大鱼"><a href="#大鱼" class="headerlink" title="大鱼"></a>大鱼</h1><pre><code>2017年1月20日,他来过两次,一次来早了,一次来晚了,你嫁过人啦,嫁过,我18,他28.
</code></pre><h1 id="比利林恩的中场战事"><a href="#比利林恩的中场战事" class="headerlink" title="比利林恩的中场战事"></a>比利林恩的中场战事</h1><pre><code>2017年1月30日,还是李安的老套路,此时无声胜有声.
</code></pre><h1 id="血战钢锯岭"><a href="#血战钢锯岭" class="headerlink" title="血战钢锯岭"></a>血战钢锯岭</h1><pre><code>2017年2月2日,看看就行了.
</code></pre><h1 id="行尸走肉"><a href="#行尸走肉" class="headerlink" title="行尸走肉"></a>行尸走肉</h1><pre><code>2017年2月24日,格伦挂了.
</code></pre><h1 id="创业怕二件事"><a href="#创业怕二件事" class="headerlink" title="创业怕二件事"></a>创业怕二件事</h1><pre><code>2017年4月6日,一你不懂管理企业,二你害怕竞争,管理企业很简单,只要记住两点,做出用户喜欢的产品,保证开支小于收入.------《黑客与画家》.
</code></pre><h1 id="情圣"><a href="#情圣" class="headerlink" title="情圣"></a>情圣</h1><pre><code>2017年4月9日,电影挺不错的.
</code></pre><h1 id="文明之光"><a href="#文明之光" class="headerlink" title="文明之光"></a>文明之光</h1><pre><code>2017年4月20日,争取成为2%的人.
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;从你的全世界路过&quot;&gt;&lt;a href=&quot;#从你的全世界路过&quot; class=&quot;headerlink&quot; title=&quot;从你的全世界路过&quot;&gt;&lt;/a&gt;从你的全世界路过&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;2017年1月5日,在高铁上看完,很平凡,很感动.
&lt;/code&gt;&lt;/pre
    
    </summary>
    
    
  </entry>
  
</feed>
