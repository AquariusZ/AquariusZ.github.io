<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="我希望世界和平">





  <link rel="alternate" href="/atom.xml" title="我希望世界和平" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="分享学习的点点滴滴">
<meta property="og:type" content="website">
<meta property="og:title" content="我希望世界和平">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="我希望世界和平">
<meta property="og:description" content="分享学习的点点滴滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我希望世界和平">
<meta name="twitter:description" content="分享学习的点点滴滴">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title> 我希望世界和平 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我希望世界和平</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">hallo world</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/LDAP详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/08/LDAP详解/" itemprop="url">
                  LDAP详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-08T08:55:48+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/04/selinux详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/04/selinux详解/" itemprop="url">
                  selinux详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-04T14:16:40+08:00">
                2017-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是selinux"><a href="#什么是selinux" class="headerlink" title="什么是selinux"></a>什么是selinux</h1><p>#</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/24/find命令详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/24/find命令详解/" itemprop="url">
                  find命令详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-24T13:09:59+08:00">
                2017-01-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>find命令算是linux系统管理员必备的技能,它能通过文件名查找,时间查找,权限查找,用户查找,大小查找,文件类型查找等等,还支持正则表达示.查找之后还能执行操作,功能强大.本文将从这些属性来一一介绍,欢迎阅读.</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">find [-H] [-L] [-P] [-D debugopts] [-Olevel] [starting-point...] [expression]</div><div class="line">这是文档中的语法.</div><div class="line">大多数被简化成下面</div><div class="line">find [path] [express] [actions]</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">H 只遵循指定符号链接.例: `find -H uname /bin -type f -print` 只会查找uname符号链接.</div><div class="line">L 遵循所有符号链接. 例: `find -L /bin -type f -print` 会查找所有文件,包括符号链接.</div><div class="line">P 默认选项,不遵循符号链接.也就是不查找符号链接.例: `find [-P] /bin -type f -print`</div><div class="line">不会查找符号链接.&quot;-P&quot;可写可不写.</div><div class="line">H L P 三个同时使用时,只有最后一个生效.</div><div class="line">D 调试选项.此选项也是非常有用,有兴趣的可以查看文档,这里不作解释.</div><div class="line">-Olevel 启用查询优化。查找程序重新排序测试以加速执行，同时保持整体效果.</div><div class="line">很少用,有兴趣的可以查看文档,这里不作解释</div></pre></td></tr></table></figure>
<h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ol>
<li>如果没有指定目录,就从当前目录开始查找.</li>
<li>find命令分左右执行,左边为tests(条件测试),右边为actions(动作).</li>
<li>find命令中,有逻辑或与非,默认是与操作,就是and.</li>
<li>find命令中,默认mindepth(最小深度)为1, 但是不要指定为负数,表示处理所有文件,maxdepth表示最大深度,0表示用于测试,可以指定正整数.</li>
</ol>
<h1 id="逻辑操作"><a href="#逻辑操作" class="headerlink" title="逻辑操作"></a>逻辑操作</h1><h1 id="find命令中是有逻辑操作分别是-o-a"><a href="#find命令中是有逻辑操作，分别是-o-a" class="headerlink" title="find命令中是有逻辑操作，分别是-o,!,-a."></a>find命令中是有逻辑操作，分别是-o,!,-a.</h1><h2 id="-aand为默认为逻辑与操作所有条件同时满足不写也可以看例子"><a href="#a-and-为默认-为逻辑与操作-所有条件同时满足-不写也可以-看例子" class="headerlink" title="-a(and)为默认,为逻辑与操作,所有条件同时满足.不写也可以.看例子:"></a>-a(and)为默认,为逻辑与操作,所有条件同时满足.不写也可以.看例子:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; -ctime -3 -print</div><div class="line">该语句表示查找当前目录下创建时间小于3天的并且以log结尾的文件,等同</div><div class="line">find . -name &quot;*log&quot; -a -ctime -3 -print</div><div class="line">find . -name &quot;*log&quot; -and -ctime -3 -print</div></pre></td></tr></table></figure>
<h2 id="-oor为逻辑或操作只满足一个条件即可看例子"><a href="#o-or-为逻辑或操作-只满足一个条件即可-看例子：" class="headerlink" title="-o(or)为逻辑或操作,只满足一个条件即可.看例子："></a>-o(or)为逻辑或操作,只满足一个条件即可.看例子：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; -o -ctime -3 -print</div><div class="line">该语句表示查找当前目录下以log结尾或者创建时间小于3天的文件.还可以</div><div class="line">find . -name &quot;*log&quot; -or -ctime -3 -print</div></pre></td></tr></table></figure>
<h2 id="为逻辑非操作叹号后的tests取反看例子"><a href="#为逻辑非操作-叹号后的tests取反-看例子" class="headerlink" title="!为逻辑非操作,叹号后的tests取反.看例子:"></a>!为逻辑非操作,叹号后的tests取反.看例子:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;*log&quot; ! -ctime -3 -print</div><div class="line">该语句表示查找当前目录下以log结尾并且创建时间不小于3天的文件.等同于</div><div class="line">find . -name &quot;*log&quot; -not -ctime -3 -print</div></pre></td></tr></table></figure>
<h1 id="tests条件测试"><a href="#TESTS条件测试" class="headerlink" title="TESTS条件测试"></a>TESTS条件测试</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">数值参数可以指定</div><div class="line">+n 大于n</div><div class="line">-n 小于n</div><div class="line">n 等于n</div><div class="line">-name 按名字查找</div><div class="line">-amin n 最近n分钟被访问文件</div><div class="line">-cmin n 最近n分钟创建的文件</div><div class="line">-mmin n 最近n分钟修改折文件</div><div class="line">-atime n 最后n*24访问的文件</div><div class="line">-ctime n 最后n*24创建的文件</div><div class="line">-mtime n 最后n*24修改的文件</div><div class="line">-userd n 最后n天更新的文件</div><div class="line">-anewer file 查找文件更新时间比file更新时间更新折文件</div><div class="line">-newer file 比file更新的文件</div><div class="line">-gid n 查找用户组为n的文件</div><div class="line">-group gname 查找为gname用户组的文件</div><div class="line">-uid n uid为n用户的文件</div><div class="line">-user uname uname的文件</div><div class="line">-empty 查找为空的文件或目录</div><div class="line">-links n 文件有n个链接</div><div class="line">-nogroup 没有组的文件</div><div class="line">-nouser 没有用户的文件</div><div class="line">-regex pattern 文件名匹配正则表达式模式</div><div class="line">-iregex pattern 文件名匹配正则表达式模式,但不区分大小写</div><div class="line">-path pattern 路径模式,常和-prune用于路径过虑</div><div class="line">-perm mode 权限查找</div><div class="line">-size n[cwbkmg] 根据大小查找(c 字节,w 两个字节的单词,b 512 byte的块,k 1024byte,m 1048576 byte,g 1073741824 byte)</div><div class="line">-type [bcdpflsD] 根据文件类型查找(b 块文件,c 字符文件,d 目录,p 管道,f 普通文件,l 链接文件,s socket文件,D Solaris用)</div><div class="line">-writable 文件是否可读</div><div class="line">-readable 文件是否可写</div><div class="line">-executable 文件是否可执行</div><div class="line">-samefile name 文件名相同的文件</div></pre></td></tr></table></figure>
<h1 id="actions动作"><a href="#ACTIONS动作" class="headerlink" title="ACTIONS动作"></a>ACTIONS动作</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">-delete 删除文件,成功为True.如果失败,则发出错误消息.使用-delete默认打开-depth选项.如果不指定-depth，则全部删除.**注意,-delete不能和-prune.**</div><div class="line">-exec command &#123;&#125; \; 执行命令,字符串`&#123;&#125;&apos;被当前代替在命令的参数中出现的文件名被处理，&apos;\&apos;转义&apos;;&apos;. 为每个匹配的文件运行一次指定的命令.--exec存在安全问题,建使用--execdir.</div><div class="line">-exec command &#123;&#125; + 该命令性能好于--exec command &#123;&#125; \;</div><div class="line">-execdir command &#123;&#125; \; 像-exec一样，但指定的命令从包含匹配的子目录运行,而不是从您开始的目录.</div><div class="line">-execdir command &#123;&#125; +  一样该命令性能好于--execdir command &#123;&#125; \; , 更安全.</div><div class="line">-fls file  和-ls一样,输出文件详细信息,只不过写入文件.总是创建输出文件.</div><div class="line">-fprint file 只打印匹配文件名到文件.</div><div class="line">-fprint0 file 打印匹配文件名到文件,去掉换行符.</div><div class="line">-fprintf file format</div><div class="line">-ls 显示匹配文件详细信息.就像ls -dils</div><div class="line">-ok command ; 执行命令,但总是先询问,</div><div class="line">-okdir command ;  像-execdir一样，但是以-ok相同的方式询问用户. 如果用户不同意，只要返回</div><div class="line">-print 打印完整的文件名.</div><div class="line">-print0 打印完整的文件名,但后面跟一个空字符.此选项对应于xargs -0.</div><div class="line">-printf format 在标准输出上打印格式，解释`\&apos;转义和&apos;％&apos;指令.</div><div class="line">-prune true 常和-path用于过虑目录.</div><div class="line">-quit 立即退出,例如找到了某个文件,不想继续查找,可以使用该选项.</div></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><h2 id="查找当前目录及子目录"><a href="#查找当前目录及子目录" class="headerlink" title="查找当前目录及子目录"></a>查找当前目录及子目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find</div><div class="line"># 就行了</div><div class="line">.</div><div class="line">./fstab</div><div class="line">./crypttab</div><div class="line">./mtab</div><div class="line">./resolv.conf</div><div class="line">./pki</div><div class="line">./pki/rpm-gpg</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-Debug-7</div><div class="line">./pki/rpm-gpg/RPM-GPG-KEY-CentOS-Testing-7</div><div class="line">./pki/tls</div><div class="line">./pki/tls/certs</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找一个passwd的文件"><a href="#查找一个passwd的文件" class="headerlink" title="查找一个passwd的文件"></a>查找一个passwd的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find . -name &apos;passwd&apos;</div><div class="line">./passwd</div><div class="line">./pam.d/passwd</div></pre></td></tr></table></figure>
<h2 id="查找时忽略大小写不写目录就是当前目录"><a href="#查找时忽略大小写-不写目录就是当前目录" class="headerlink" title="查找时忽略大小写,不写目录就是当前目录"></a>查找时忽略大小写,不写目录就是当前目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find  -iname &quot;PASSWD&quot;</div><div class="line">./passwd</div><div class="line">./pam.d/passwd</div></pre></td></tr></table></figure>
<h2 id="查找conf结尾的文件"><a href="#查找”-conf”结尾的文件" class="headerlink" title="查找”.conf”结尾的文件"></a>查找”.conf”结尾的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -name &quot;*.conf&quot;</div><div class="line">./resolv.conf</div><div class="line">./pki/ca-trust/ca-legacy.conf</div><div class="line">./yum/pluginconf.d/fastestmirror.conf</div><div class="line">./yum/pluginconf.d/langpacks.conf</div><div class="line">./yum/protected.d/systemd.conf</div><div class="line">./yum/version-groups.conf</div><div class="line">./rsyslog.conf</div><div class="line">./dracut.conf</div></pre></td></tr></table></figure>
<h2 id="查找小于10分钟前访问的文件"><a href="#查找小于10分钟前访问的文件" class="headerlink" title="查找小于10分钟前访问的文件"></a>查找小于10分钟前访问的文件</h2><p>基于分钟查找有”-amin(accessed n minutes)”,”-cmin(change n minutes) “,”mmin(modified n minutes)”，基于天查找有”-atime(accessed n<em>24 hours) “,”-ctime(change n</em>24 hours)”,”mtime(modified n*24 hours)”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -amin -10</div><div class="line">./passwd</div></pre></td></tr></table></figure></p>
<h2 id="查找大于10分钟修改的文件"><a href="#查找大于10分钟修改的文件" class="headerlink" title="查找大于10分钟修改的文件"></a>查找大于10分钟修改的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -cmin +10</div><div class="line">/etc/vconsole.conf</div><div class="line">/etc/locale.conf</div><div class="line">/etc/hostname</div><div class="line">/etc/.updated</div><div class="line">/etc/aliases.db</div><div class="line">/etc/subgid</div><div class="line">/etc/subuid</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找7天内访问的文件"><a href="#查找7天内访问的文件" class="headerlink" title="查找7天内访问的文件"></a>查找7天内访问的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -atime -7</div><div class="line">./nsswitch.conf.rpmnew</div><div class="line">./GeoIP.conf</div><div class="line">./GeoIP.conf.default</div><div class="line">./krb5.conf.d</div><div class="line">./screenrc</div></pre></td></tr></table></figure>
<h2 id="查找大于7天访问的文件"><a href="#查找大于7天访问的文件" class="headerlink" title="查找大于7天访问的文件"></a>查找大于7天访问的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -atime +7</div><div class="line">./vconsole.conf</div><div class="line">./locale.conf</div><div class="line">./hostname</div><div class="line">./.updated</div></pre></td></tr></table></figure>
<h2 id="查找3天修改的文件"><a href="#查找3天修改的文件" class="headerlink" title="查找3天修改的文件"></a>查找3天修改的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -mtime 3</div><div class="line">./chrony.keys</div><div class="line">./kernel</div><div class="line">./kernel/postinst.d</div><div class="line">./kernel/postinst.d/51-dracut-rescue-postinst.sh</div><div class="line">./sudo-ldap.conf</div><div class="line">./sudo.conf</div><div class="line">./sudoers</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下用户为root和5分钟之前访问过的文件"><a href="#查找-etc目录下用户为root和5分钟之前访问过的文件" class="headerlink" title="查找/etc目录下用户为root和5分钟之前访问过的文件"></a>查找/etc目录下用户为root和5分钟之前访问过的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">find /etc/ -user root -amin +5</div><div class="line">/etc/my.cnf</div><div class="line">/etc/ssh</div><div class="line">/etc/ssh/sshd_config</div><div class="line">/etc/ssh/ssh_config</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下用户为root和文件内容为空的文件"><a href="#查找-etc目录下用户为root和文件内容为空的文件" class="headerlink" title="查找/etc目录下用户为root和文件内容为空的文件"></a>查找/etc目录下用户为root和文件内容为空的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -user root -empty</div><div class="line">/etc/security/console.apps</div><div class="line">/etc/security/console.perms.d</div><div class="line">/etc/security/namespace.d</div><div class="line">/etc/security/opasswd</div><div class="line">/etc/.pwd.lock</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下没有组的文件但不为空的文件"><a href="#查找-etc目录下没有组的文件但不为空的文件" class="headerlink" title="查找/etc目录下没有组的文件但不为空的文件"></a>查找/etc目录下没有组的文件但不为空的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find /etc/ -nogroup ! -empty</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找文件链接大于5个的文件但文件小于1m"><a href="#查找文件链接大于5个的文件但文件小于1M" class="headerlink" title="查找文件链接大于5个的文件但文件小于1M"></a>查找文件链接大于5个的文件但文件小于1M</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find -links -5 -size -1M</div><div class="line">./selinux/targeted/contexts/netfilter_contexts</div><div class="line">./selinux/targeted/semanage.read.LOCK</div><div class="line">./selinux/targeted/semanage.trans.LOCK</div><div class="line">./security/opasswd</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找usrbin权限为777的文件"><a href="#查找-usr-bin权限为777的文件" class="headerlink" title="查找/usr/bin权限为777的文件"></a>查找/usr/bin权限为777的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# find /usr/bin/ -perm 777</div><div class="line">/usr/bin/mailq</div><div class="line">/usr/bin/newaliases</div><div class="line">/usr/bin/rmail</div><div class="line">/usr/bin/slogin</div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="查找所有suid的文件"><a href="#查找所有suid的文件" class="headerlink" title="查找所有suid的文件"></a>查找所有suid的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# find / -perm -4000 -print</div><div class="line">/usr/bin/crontab</div><div class="line">/usr/bin/passwd</div><div class="line">/usr/bin/sudo</div><div class="line">/usr/sbin/unix_chkpwd</div><div class="line">/usr/sbin/usernetctl</div></pre></td></tr></table></figure>
<h2 id="查找etc目录下类型为文件但权限不能为777"><a href="#查找-etc目录下类型为文件-但权限不能为777" class="headerlink" title="查找/etc目录下类型为文件,但权限不能为777"></a>查找/etc目录下类型为文件,但权限不能为777</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find . -type f ! -perm 777</div><div class="line">./aliases.db</div><div class="line">./subgid</div><div class="line">./subuid</div><div class="line">./screenrc</div></pre></td></tr></table></figure>
<h2 id="查找所有可读的文件"><a href="#查找所有可读的文件" class="headerlink" title="查找所有可读的文件"></a>查找所有可读的文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / -perm /u=r</div><div class="line">/home/beatrix/.bash_profile</div><div class="line">/home/beatrix/.bashrc</div><div class="line">/media</div><div class="line">/mnt</div><div class="line">/mnt/eeee</div></pre></td></tr></table></figure>
<h2 id="查找所有777权限的文件将权限改成644"><a href="#查找所有777权限的文件-将权限改成644" class="headerlink" title="查找所有777权限的文件,将权限改成644"></a>查找所有777权限的文件,将权限改成644</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / -type f -perm 0777 -print -exec chmod 644 &#123;&#125; +</div></pre></td></tr></table></figure>
<h2 id="删除所有mp3文件"><a href="#删除所有mp3文件" class="headerlink" title="删除所有mp3文件"></a>删除所有mp3文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find . -type f -name &quot;*.mp3&quot; -execdir rm -f &#123;&#125; +</div></pre></td></tr></table></figure>
<h2 id="查找大于1g的文件并删除"><a href="#查找大于1G的文件并删除" class="headerlink" title="查找大于1G的文件并删除"></a>查找大于1G的文件并删除</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]#  find / -size +1G -exec rm -rf &#123;&#125; \;</div></pre></td></tr></table></figure>
<h2 id="查找所有文件但不查找usr和boot目录"><a href="#查找所有文件但不查找-usr和-boot目录" class="headerlink" title="查找所有文件但不查找/usr和/boot目录"></a>查找所有文件但不查找/usr和/boot目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost etc]# find / \( -path &quot;/usr&quot; -o \</div><div class="line">-path &quot;/boot&quot; \) -prune -o -type f -print</div></pre></td></tr></table></figure>
<h2 id="同时执行两条命令查找suid和大于100m的文件并写入文件"><a href="#同时执行两条命令-查找suid和大于100M的文件并写入文件" class="headerlink" title="同时执行两条命令,查找suid和大于100M的文件并写入文件"></a>同时执行两条命令,查找suid和大于100M的文件并写入文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find / \( -perm -4000 -fprintf /root/suid.txt \) , \</div><div class="line">\( -size +100M -fprintf /root/big.txt \)</div></pre></td></tr></table></figure>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/18/Linux的特殊权限/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/18/Linux的特殊权限/" itemprop="url">
                  Linux的特殊权限
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-18T21:11:15+08:00">
                2017-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是特殊权限"><a href="#什么是特殊权限" class="headerlink" title="什么是特殊权限"></a>什么是特殊权限</h1><pre><code>linux中出来常见的r,w,x,还有3个特殊权限,分别是setuid,setgid和stick bit.
</code></pre><h1 id="suid"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h1><p><strong>看看setuid有什么要求</strong></p>
<ol>
<li>SUID权限仅对二进制程序(binary program)有效；</li>
<li>执行者对于该程序需要具有x的可执行权限；</li>
<li>本权限仅在执行该程序的过程中有效(run-time)；</li>
<li>执行者将具有该程序拥有者(owner)的权限。</li>
</ol>
<h2 id="举个例子passwd命令看看passwd命令是谁的"><a href="#举个例子-passwd命令-看看passwd命令是谁的，" class="headerlink" title="举个例子,passwd命令,看看passwd命令是谁的，"></a>举个例子,passwd命令,看看passwd命令是谁的，</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-bash-4.2# ls -l /usr/bin/passwd</div><div class="line">-rwsr-xr-x. 1 root root 27832 1月  30 2014 /usr/bin/passwd</div><div class="line">执行权限x变成s</div></pre></td></tr></table></figure>
<p><strong>那么总结一下什么是setuid,本来没有执行权限的用户,以文件所属主的权限来执行.</strong></p>
<h2 id="如何设置"><a href="#如何设置" class="headerlink" title="如何设置"></a>如何设置</h2><p>可以执行下列命令:<br>例如我给touch命令加上suid:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# chmod u+s /usr/bin/touch</div><div class="line">#或者使用 chmod 4755 /usr/bin/touch #前面多一个4</div><div class="line">#注意要添加suid必须是可执行的文件,那么现在用touch创建一个文件,看看是谁创建的,</div><div class="line"></div><div class="line">[zhong@localhost zip]$ touch hallo</div><div class="line">[zhong@localhost zip]$ ls -al</div><div class="line">-rw-rw-r--. 1 root  zhong        0 1月  23 20:05 hallo</div><div class="line">#看是谁的,以防万一还是改回来吧</div></pre></td></tr></table></figure>
<h2 id="那么改回的命令有事什么呢"><a href="#那么改回的命令有事什么呢" class="headerlink" title="那么改回的命令有事什么呢"></a>那么改回的命令有事什么呢</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# chmod u-s /usr/bin/touch</div><div class="line"># 也可以用 chmod 0755 /usr/bin/touch</div><div class="line">[root@localhost zip]# ls -al /usr/bin/touch</div><div class="line">-rwxr-xr-x. 1 root root 62432 11月 20 2015 /usr/bin/touch</div></pre></td></tr></table></figure>
<h1 id="再来看看sgid"><a href="#再来看看SGID" class="headerlink" title="再来看看SGID"></a>再来看看SGID</h1><p>当s出现在目录或文件所属群的x权限上时，此时就称为SET GID简称SGID,那SGID对文件和目录分部有哪些功能呢？</p>
<ul>
<li>使用者若对于此目录具有 r 与 x 的权限时，该使用者能够进入此目录</li>
<li>使用者在此目录下的群组将会变成该目录的群组</li>
<li>若使用者在此目录下具有 w 的权限(可以新建文件)，则使用者所创建的新文件，该新文件的群组与此目录的群组相同</li>
</ul>
<h1 id="sgid对文件"><a href="#SGID对文件" class="headerlink" title="SGID对文件"></a>SGID对文件</h1><ul>
<li>SGID 对二进制可执行文件有效</li>
<li>程式执行者对于该文件来说，需具备 x 的权限</li>
<li>执行者在执行的过程中将会获得该文件群组的支援（用于改文件群组的权限）</li>
</ul>
<h2 id="sgid-用一个列子来说比较清晰"><a href="#sgid-用一个列子来说比较清晰" class="headerlink" title="sgid 用一个列子来说比较清晰"></a>sgid 用一个列子来说比较清晰</h2><h3 id="假设系统中有两个账号分别为mike和jone这两个用户除了自己的初始组外还共同支持一个project组假设两位用户都要在srvhome的目录下进行开发该目录不允许其他用户进入查看那么权限该怎么设置呢"><a href="#假设系统中有两个账号-分别为mike和jone-这两个用户除了自己的初始组外-还共同支持一个project组，假设两位用户都要在-srv-home的目录下进行开发-该目录不允许其他用户进入查看-那么权限该怎么设置呢" class="headerlink" title="假设系统中有两个账号,分别为mike和jone,这两个用户除了自己的初始组外,还共同支持一个project组，假设两位用户都要在/srv/home的目录下进行开发,该目录不允许其他用户进入查看.那么权限该怎么设置呢."></a>假设系统中有两个账号,分别为mike和jone,这两个用户除了自己的初始组外,还共同支持一个project组，假设两位用户都要在/srv/home的目录下进行开发,该目录不允许其他用户进入查看.那么权限该怎么设置呢.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# id mike</div><div class="line">uid=1001(mike) gid=1001(mike) groups=1001(mike)</div><div class="line">[root@localhost zip]# id jone</div><div class="line">uid=1002(jone) gid=1002(jone) groups=1002(jone)</div><div class="line"># 用户都存在</div><div class="line">[root@localhost zip]# groupadd project</div><div class="line"># 添加project组</div><div class="line"># 再把添加到project组</div><div class="line">[root@localhost zip]# usermod -a -G project mike</div><div class="line">[root@localhost zip]# usermod -a -G project jone</div><div class="line"># 创建项目目录</div><div class="line">[root@localhost zip]# mkdir /srv/home</div><div class="line"># 把所属组改为project</div><div class="line">[root@localhost zip]# chgrp project /srv/home/</div><div class="line"># 不允许其他用户进入,所以other组的权限是0</div><div class="line">[root@localhost zip]# chmod 770 /srv/home/</div><div class="line"># 那么我们现在看看权限是什么</div><div class="line">[root@localhost zip]# ls -al /srv/</div><div class="line">drwxrwx---.  2 root project    6 1月  23 20:46 home</div><div class="line"></div><div class="line"># 现在我们用mike用户进入目录并创建一个文件</div><div class="line">[root@localhost zip]# su mike</div><div class="line">[mike@localhost zip]$ cd /srv/home/</div><div class="line">[mike@localhost home]$ touch mike</div><div class="line"># 我们看看权限是谁</div><div class="line">[mike@localhost home]$ ls -al mike</div><div class="line">-rw-rw-r--. 1 mike mike 0 1月  23 20:53 mike</div><div class="line"># 那么试问,mike文件的属主,所属组是谁,jone账号能修改吗,答案是肯定不能写个的.</div><div class="line"># 下面SGID就该登场了</div><div class="line"></div><div class="line"># 我们给/srv/home加上SGID还是有两种加法</div><div class="line"># 也可以chmod g+s /srv/home</div><div class="line">[root@localhost zip]# chmod 2770 /srv/home/</div><div class="line">[root@localhost zip]# ls -l /srv/</div><div class="line">total 0</div><div class="line">drwxrws---. 2 root project 17 1月  23 20:53 home</div><div class="line"># 看所属组上多了一个s</div><div class="line"># 我们在用mike账号进到home目录下创建文件进行修改</div><div class="line"></div><div class="line">[root@localhost srv]# su mike</div><div class="line">[mike@localhost home]$ touch hallo</div><div class="line">[mike@localhost home]$ ls -al</div><div class="line">-rw-rw-r--. 1 mike project  0 1月  23 20:59 hallo</div><div class="line">-rw-rw-r--. 1 mike mike     0 1月  23 20:53 mike</div><div class="line"># 看属主是谁,所属组是谁,能修改否?这就是SGID的作用</div><div class="line"># 有一天,jone不高兴,把项目里所有的文件都删了,这可坏了事,那该怎样预防呢,这个时候Sticky Bit该上场了.</div></pre></td></tr></table></figure>
<h1 id="sticky-bit"><a href="#Sticky-Bit" class="headerlink" title="Sticky Bit"></a>Sticky Bit</h1><p>SBIT（Sticky Bit）目前只针对目录有效，对于目录的作用是：当用户在该目录下建立文件或目录时，仅有自己与 root才有权力删除。</p>
<p>看看tmp目录就是一个很好的例子,所有人都能在tmp目录里创建,但是只有root和自己能删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost srv]# ls -l /</div><div class="line">drwxrwxrwt.   7 root root 4096 1月  23 15:29 tmp</div><div class="line"># 看权限后面多一个t</div><div class="line"># 那么我们赶紧给项目加上sbit权限</div></pre></td></tr></table></figure>
<h2 id="添加sbit权限"><a href="#添加SBIT权限" class="headerlink" title="添加SBIT权限"></a>添加SBIT权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@localhost srv]# chmod 3770 home/</div><div class="line"># 或者使用chmod o+t /srv/home/</div><div class="line">[root@localhost srv]# ls -al</div><div class="line">drwxrws--T.  2 root project   29 1月  23 20:59 home</div><div class="line"># 看多了一个T</div><div class="line"></div><div class="line"># 那我进去高点破坏把</div><div class="line"></div><div class="line">[root@localhost srv]# su jone</div><div class="line">[jone@localhost srv]$ cd home/</div><div class="line"># 看看有谁呢</div><div class="line"></div><div class="line">[jone@localhost home]$ ls -al</div><div class="line">-rw-rw-r--. 1 mike project  0 1月  23 20:59 hallo</div><div class="line">-rw-rw-r--. 1 mike mike     0 1月  23 20:53 mike</div><div class="line"># 那删除一下试试呢</div><div class="line">[jone@localhost home]$ rm mike</div><div class="line">rm: remove write-protected regular empty file ‘mike’? y</div><div class="line">rm: cannot remove ‘mike’: Operation not permitted</div><div class="line"># 怎么会这样，再试试hallo</div><div class="line">[jone@localhost home]$ rm -f hallo</div><div class="line">rm: cannot remove ‘hallo’: Operation not permitted</div><div class="line"># 看还是删不掉,提示权限不够</div></pre></td></tr></table></figure>
<h1 id="以上就是linux的特殊权限"><a href="#以上就是Linux的特殊权限" class="headerlink" title="以上就是Linux的特殊权限."></a><strong>以上就是Linux的特殊权限.</strong></h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/18/ACL权限详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/18/ACL权限详解/" itemprop="url">
                  ACL权限详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-18T16:29:58+08:00">
                2017-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="acl简介"><a href="#ACL简介" class="headerlink" title="ACL简介"></a>ACL简介</h1><p><strong>ACL</strong>，就是<strong>Access Control List</strong>，一个文件/目录的访问控制列表，可以针对任意指定的用户/组分配RWX权限。使系统管理更加灵活。</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/14/awk命令详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/14/awk命令详解/" itemprop="url">
                  awk命令详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-14T09:33:45+08:00">
                2017-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是awk"><a href="#什么是awk" class="headerlink" title="什么是awk"></a>什么是awk</h1><blockquote>
<p>AWK是一种优良的文本处理工具,Linux及Unix环境中现有的功能最强大的数据处理引擎之一.AWK提供了极其强大的功能:可以进行正则表达式的匹配,样式装入、流控制、数学运算符、进程控制语句甚至于内置的变量和函数.它具备了一个完整的语言所应具有的几乎所有精美特性.它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表,还有无数其他的功能.</p>
</blockquote>
<h1 id="awk工作流"><a href="#awk工作流" class="headerlink" title="awk工作流"></a>awk工作流</h1><p>awk遵循了非常简单的工作流,读取-执行-重复.<br><img src="/images/awk_workflow.jpg" alt="awk工作流"></p>
<h1 id="內建变量"><a href="#內建变量" class="headerlink" title="內建变量"></a>內建变量</h1><p>$0   | 当前记录（这个变量中存放着整个行的内容）<br>$1~$n  |  当前记录的第n个字段，字段间由FS分隔<br>FS  | 输入字段分隔符 默认是空格或Tab<br>NF   | 当前记录中的字段个数，就是有多少列<br>NR  |  已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。<br>FNR  | 当前记录数，与NR不同的是，这个值会是各个文件自己的行号<br>RS  |  输入的记录分隔符， 默认为换行符<br>OFS  | 输出字段分隔符， 默认也是空格<br>ORS  | 输出的记录分隔符，默认为换行符<br>FILENAME   |   当前输入文件的名字</p>
<h1 id="怎么用呢"><a href="#怎么用呢" class="headerlink" title="怎么用呢?"></a>怎么用呢?</h1><h2 id="假设我们有个文件empdata里面的内容"><a href="#假设我们有个文件emp-data-里面的内容" class="headerlink" title="假设我们有个文件emp.data,里面的内容:"></a>假设我们有个文件emp.data,里面的内容:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">姓名  时薪   工作时间</div><div class="line">Beth	4.00	0</div><div class="line">Dan	    3.75	0</div><div class="line">kathy	4.00	10</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div></pre></td></tr></table></figure>
<h2 id="要求把第一列名提取出来"><a href="#要求-把第一列名提取出来" class="headerlink" title="要求:把第一列名提取出来"></a>要求:把第一列名提取出来</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">该文件使用空格做分隔符,所有直接用$1打印</div><div class="line">那么$2就是第二列,$3就是第三列,$0就是整列</div><div class="line">awk &apos;&#123;print $1&#125;&apos; emp.data</div><div class="line"></div><div class="line">## 输出</div><div class="line">姓名</div><div class="line">Beth</div><div class="line">Dan</div><div class="line">kathy</div><div class="line">Mark</div><div class="line">Mary</div><div class="line">Susie</div><div class="line">zhong</div><div class="line">aquarius</div></pre></td></tr></table></figure>
<h2 id="再来筛选一下数据我们只要工作时间大于10的人"><a href="#再来筛选一下数据-我们只要工作时间大于10的人" class="headerlink" title="再来筛选一下数据,我们只要工作时间大于10的人"></a>再来筛选一下数据,我们只要工作时间大于10的人</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">分析:工作时间就是$3&gt;10就OK了,$0输出整列</div><div class="line">awk &apos;$3 &gt; 10 &#123;print $0&#125;&apos; emp.data</div><div class="line"></div><div class="line">姓名    时薪    工作时间</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div></pre></td></tr></table></figure>
<h2 id="那么再来计算一下他们一共拿了多少钱并且不计算工作时间小于10小时的"><a href="#那么再来计算一下-他们一共拿了多少钱-并且不计算工作时间小于10小时的" class="headerlink" title="那么再来计算一下,他们一共拿了多少钱,并且不计算工作时间小于10小时的"></a>那么再来计算一下,他们一共拿了多少钱,并且不计算工作时间小于10小时的</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">直接第二列乘第三列就行了</div><div class="line">awk &apos;$3 &gt; 10 &#123;print $0,$2 * $3&#125;&apos; emp.data</div><div class="line"></div><div class="line">输出</div><div class="line"></div><div class="line">Mark	5.00	20   100</div><div class="line">Mary	5.50	22   121</div><div class="line">Susie	4.25	18   76.5</div><div class="line">zhong   7.8		50   390</div><div class="line">aquarius  8.8   100  880</div></pre></td></tr></table></figure>
<h2 id="再来介绍begin和end都必须大写哦"><a href="#再来介绍BEGIN和END-都必须大写哦" class="headerlink" title="再来介绍BEGIN和END(都必须大写哦)"></a>再来介绍BEGIN和END(都必须大写哦)</h2><p>对,没错,BEGIN就是开始的意思,END就是最后<br>我不喜欢第一行,想把它换成英文的<br>再在最后一行加上一句I love you,那该怎么做呢?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">awk &apos;BEGIN&#123;print &quot;name\t rate\t time&quot;&#125; NR&gt;1&#123;print $0&#125; END&#123;print &quot;I love you\n&quot;&#125;&apos; emp.data</div><div class="line"></div><div class="line">name	 rate	 time</div><div class="line">Beth	4.00	0</div><div class="line">Dan	    3.75	0</div><div class="line">kathy	4.00	10</div><div class="line">Mark	5.00	20</div><div class="line">Mary	5.50	22</div><div class="line">Susie	4.25	18</div><div class="line">zhong   7.8		50</div><div class="line">aquarius  8.8   100</div><div class="line">I love you</div></pre></td></tr></table></figure></p>
<h2 id="那么我们来指定一下分割符"><a href="#那么我们来指定一下分割符" class="headerlink" title="那么我们来指定一下分割符"></a>那么我们来指定一下分割符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">指定冒号为分隔符,打印了第一列,和最后一列</div><div class="line">awk -F: &apos;&#123;print $1,$NF&#125;&apos; /etc/passwd</div><div class="line"></div><div class="line">root /bin/bash</div><div class="line">daemon /usr/sbin/nologin</div><div class="line">bin /usr/sbin/nologin</div><div class="line">sys /usr/sbin/nologin</div><div class="line">sync /bin/sync</div><div class="line">games /usr/sbin/nologin</div><div class="line">man /usr/sbin/nologin</div><div class="line">lp /usr/sbin/nologin</div><div class="line">mail /usr/sbin/nologin</div><div class="line">news /usr/sbin/nologin</div><div class="line">uucp /usr/sbin/nologin</div><div class="line">proxy /usr/sbin/nologin</div><div class="line">www-data /usr/sbin/nologin</div><div class="line">backup /usr/sbin/nologin</div><div class="line">list /usr/sbin/nologin</div><div class="line">irc /usr/sbin/nologin</div><div class="line">......</div></pre></td></tr></table></figure>
<h1 id="以上就是awk的基本用法如有不妥欢迎指教"><a href="#以上就是awk的基本用法-如有不妥欢迎指教" class="headerlink" title="以上就是awk的基本用法,如有不妥欢迎指教."></a>以上就是awk的基本用法,如有不妥欢迎指教.</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/13/shell编程-参数替换/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/13/shell编程-参数替换/" itemprop="url">
                  shell编程--参数替换
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-13T21:21:55+08:00">
                2017-01-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="参数替换"><a href="#参数替换" class="headerlink" title="参数替换"></a>参数替换</h3><hr>
<h2 id="parameter"><a href="#parameter" class="headerlink" title="${parameter}"></a>${parameter}</h2><p>与$parameter相同,在某些上下文中,${paramter}很少产生混淆.</p>
<h2 id="parameter-defaultparameter-default这里有个天坑"><a href="#parameter-default-parameter-default-这里有个天坑" class="headerlink" title="${parameter-default},${parameter:-default}这里有个天坑"></a>${parameter-default},${parameter:-default}这里有个天坑</h2><p>${parameter-default} – 如果变量parameter没有声明,那么就是用默认值.<br>${parameter:-default} – 如果变量parameter没有声明,那么就是用默认值.<br><strong>在绝大多数的情况下都是相同的.只有在parameter已经声明,但值为null得时候,才会产生不一样的结构.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">username0=</div><div class="line">echo &quot;username0 has been declared, but is set to null.&quot;</div><div class="line">echo &quot;username0 = $&#123;username0-`whoami`&#125;&quot;</div><div class="line"># 不会有输出. 12</div><div class="line">echo</div><div class="line">echo username1 has not been declared.</div><div class="line">echo &quot;username1 = $&#123;username1-`whoami`&#125;&quot;</div><div class="line"># 将会输出默认值. 18</div><div class="line">username2=</div><div class="line">echo &quot;username2 has been declared, but is set to null.&quot;</div><div class="line">echo &quot;username2 = $&#123;username2:-`whoami`&#125;&quot;</div><div class="line"># ^</div><div class="line"># 会输出, 因为:-会比-多一个条件测试. 24 # 可以与上边的例子比较一下. 25</div><div class="line"></div><div class="line">#</div><div class="line"></div><div class="line"># 再来一个:</div><div class="line"></div><div class="line">variable=</div><div class="line"># 变量已经被声明, 但是设为空值. 33</div><div class="line">echo &quot;$&#123;variable-0&#125;&quot; # (没有输出)</div><div class="line">echo &quot;$&#123;variable:-1&#125;&quot; # 1</div><div class="line"></div><div class="line">unset variable</div><div class="line"></div><div class="line">echo &quot;$&#123;variable-2&#125;&quot; # 2</div><div class="line">echo &quot;$&#123;variable:-3&#125;&quot; # 3</div><div class="line"></div><div class="line"># 如果脚本没有接收来自命令行的参数,那么默认参数结构将会提供一个默认值给脚本</div><div class="line"></div><div class="line">DEFAULT_FILENAME=hallo.txt</div><div class="line">filename=$&#123;1:-$DEFAULT_FILENAME&#125;</div><div class="line"># 如果没有指定值, 那么下面的代码块将会使用filename</div></pre></td></tr></table></figure>
<h2 id="parameterdefaultparameterdefault"><a href="#parameter-default-parameter-default" class="headerlink" title="${parameter=default},${parameter:=default}"></a>${parameter=default},${parameter:=default}</h2><p>${parameter=default} – 如果parameter没有声明,那么就把它的值设为default.<br>${parameter:=default} – 如果parameter没有声明,那么就把它的值设为default</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo $&#123;username=`whoami`&#125;</div><div class="line"># 变量&quot;username&quot;现在被赋值为`whoami`.</div></pre></td></tr></table></figure>
<h2 id="parameteralt_value-parameteralt_value"><a href="#parameter-alt-value-parameter-alt-value" class="headerlink" title="${parameter+alt_value}, ${parameter:+alt_value}"></a>${parameter+alt_value}, ${parameter:+alt_value}</h2><p>${parameter+alt_value} – 如果变量parameter被声明了, 那么就使用alt_value, 否则就使用<br>null字符串.<br>${parameter:+alt_value} – 如果变量parameter被设置了, 那么就使用alt_value, 否则就使用<br>null字符串.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">a=$&#123;param1+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"></div><div class="line">param2=</div><div class="line">a=$&#123;param2+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div><div class="line"></div><div class="line">param3=123</div><div class="line">a=$&#123;param3+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div><div class="line"></div><div class="line">echo</div><div class="line">echo &quot;###### \$&#123;parameter:+alt_value&#125; ########&quot;</div><div class="line">echo</div><div class="line"></div><div class="line">a=$&#123;param4:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"></div><div class="line">param5=</div><div class="line">a=$&#123;param5:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a =</div><div class="line"># 产生与a=$&#123;param5+xyz&#125;不同的结果. 26</div><div class="line">param6=123</div><div class="line">a=$&#123;param6:+xyz&#125;</div><div class="line">echo &quot;a = $a&quot; # a = xyz</div></pre></td></tr></table></figure>
<h2 id="parametererr_msg-parametererr_msg"><a href="#parameter-err-msg-parameter-err-msg" class="headerlink" title="${parameter?err_msg}, ${parameter:?err_msg}"></a>${parameter?err_msg}, ${parameter:?err_msg}</h2><p>${parameter?err_msg} – 如果parameter已经被声明, 那么就使用设置的值, 否则打印err_msg<br>错误消息.<br>${parameter:?err_msg} – 如果parameter已经被设置, 那么就使用设置的值, 否则打印<br>err_msg错误消息.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">: $&#123;HOSTNAME?&#125; $&#123;USER?&#125; $&#123;HOME?&#125; # $&#123;MAIL?&#125;</div><div class="line"></div><div class="line">echo</div><div class="line">echo &quot;Name of the machine is $HOSTNAME.&quot;</div><div class="line">echo &quot;You are $USER.&quot;</div><div class="line">echo &quot;Your home directory is $HOME.&quot;</div><div class="line">echo &quot;Your mail INBOX is located in $MAIL.&quot;</div><div class="line">echo</div><div class="line">echo &quot;If you are reading this message,&quot;</div><div class="line">echo &quot;critical environmental variables have been set.&quot;</div><div class="line">echo</div><div class="line">echo</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/13/shell编程-条件判断/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/13/shell编程-条件判断/" itemprop="url">
                  shell编程--条件判断
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-13T19:55:46+08:00">
                2017-01-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="if单分支语法"><a href="#if单分支语法" class="headerlink" title="if单分支语法"></a>if单分支语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">else</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">fi</div></pre></td></tr></table></figure>
<h1 id="if多分支语法"><a href="#if多分支语法" class="headerlink" title="if多分支语法"></a>if多分支语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">if 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">elif 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">elif 条件判断;then</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">.......</div><div class="line"></div><div class="line">fi</div></pre></td></tr></table></figure>
<h1 id="条件判断中可以进行的测试"><a href="#条件判断中可以进行的测试" class="headerlink" title="条件判断中可以进行的测试"></a>条件判断中可以进行的测试</h1><hr>
<h2 id="条件测试方式"><a href="#条件测试方式" class="headerlink" title="条件测试方式"></a>条件测试方式</h2><ul>
<li>[expr]一个括弧里写表达式,但使用比较符号时,要加上逃逸字符,进行转义才行.</li>
<li>[[expr]]两个括弧里写表达式</li>
<li>test expr 关键字test</li>
<li>bash命令</li>
</ul>
<h2 id="条件测试的类型"><a href="#条件测试的类型" class="headerlink" title="条件测试的类型"></a>条件测试的类型</h2><p>整数测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-gt #greater than 大于</div><div class="line">-lt #less than 小于</div><div class="line">-ge #greater than or equal  大于等于</div><div class="line">-le #less than or equal 小于等于</div><div class="line">-eq #equal 等于</div></pre></td></tr></table></figure>
<p>字符测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;  大于</div><div class="line">&lt;  小于</div><div class="line">== 等于</div><div class="line">!= 不等</div><div class="line">-z 为空则为true</div><div class="line">-n 不为空为true</div></pre></td></tr></table></figure>
<p>文件测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">-e 文件是否存在</div><div class="line">-a 文件是否存在,同-e，已被弃用</div><div class="line">-f 表示这个文件是一个普通文件</div><div class="line">-s 文件大小部位零</div><div class="line">-d 表示这是个目录</div><div class="line">-b 表示这是一个块设备(软盘,光驱,....)</div><div class="line">-c 表示是一个字符设备(键盘,声卡,....)</div><div class="line">-p 这个文件是一个管道</div><div class="line">-h 这是一个符号链接</div><div class="line">-L 这是一个符号链接</div><div class="line">-S 表示是一个socket</div><div class="line">-t 文件(描述符)被关联到一个终端设备上</div><div class="line">这个测试选项一般被用来检测脚本中的stdin([ -t 0 ]) 或者stdout([ -t 1 ])是否来自于一个终端</div><div class="line">-r 文件是否有可读权限</div><div class="line">-w 文件是否有可写权限</div><div class="line">-x 文件是否有可执行权限</div><div class="line">-g 文件或目录是否设置sgid</div><div class="line">-u 文件或目录是否设置suid</div><div class="line">-k 是否设置粘贴位</div><div class="line">-O 判断你是否是文件的拥有者</div><div class="line">-G 文件的gid是否与你相等</div><div class="line">-N 从文件到上次被读取到现在为止,文件是否被修改过</div><div class="line">f1 -nt f2 文件f1比文件f2新</div><div class="line">f1 -ot f2 文件f1比文件f2旧</div><div class="line">f1 -ef f2 文件f1和文件是相同文件的硬链接</div><div class="line">! 取反</div></pre></td></tr></table></figure>
<p>其他</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-a 逻辑与</div><div class="line">exp1 -a exp2 如果表达式exp1和exp2都为真,结果才为真</div><div class="line"></div><div class="line">-o 逻辑或</div><div class="line">exp1 -o exp2 如果表达式exp1和exp2至少一个为真,那么结果为真.</div></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>判断当前用户是否为管理员,是则输出是管理员,否则输出是普通用户.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">ROOT_UID=0</div><div class="line"># bash 内置变量可以直接引用</div><div class="line">if [ &quot;$UID&quot; -ne &quot;$ROOT_ID&quot; ]</div><div class="line">then</div><div class="line">	echo &quot;The User is common user&quot;</div><div class="line">else</div><div class="line">	echo &quot;The user is root&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>写一个脚本,生成两个随机数,比较其大小,输出较大的数.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">A=$RANDOM</div><div class="line">B=$RANDOM</div><div class="line"># 一定要主要表达式两端的空格</div><div class="line">if [[ $A &gt; $B ]]</div><div class="line">then</div><div class="line">	echo &quot;A greater than B.&quot;</div><div class="line">else</div><div class="line">	echo &quot;B greater than A.&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>字符串比较是比较其ASCII中的位置,第一位相同往后移比较.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">if [ &quot;A&quot; \&gt;  &quot;B&quot; ]</div><div class="line">then</div><div class="line">	echo &quot;A greater than B&quot;</div><div class="line">else</div><div class="line">	echo &quot;B greater than A&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/12/cut命令详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/cut命令详解/" itemprop="url">
                  cut命令详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-12T22:12:08+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>cut主要是用来分割文件中的字符串，并且根据要求进行显示的一个命令。虽然他的用法基本上都可以用其他的linux命令所代替，但是用cut会更方便一点。</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut(选项)(参数)</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-b：仅显示行中指定直接范围的内容；</div><div class="line">-c：仅显示行中指定范围的字符；</div><div class="line">-d：指定字段的分隔符，默认的字段分隔符为“TAB”；</div><div class="line">-f：显示指定字段的内容；</div><div class="line">-n：与“-b”选项连用，不分割多字节字符；</div><div class="line">--complement：补足被选择的字节、字符或字段；</div><div class="line">--out-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符； --help：显示指令的帮助信息；</div><div class="line">--version：显示指令的版本信息。</div></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><p>例如有一个学生报表信息，包含No、Name、Mark、Percent：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test.txt</div><div class="line">No  Name  Mark  Percent</div><div class="line">01  tom   69    91</div><div class="line">02  jack  71    87</div><div class="line">03  alex  68    98</div></pre></td></tr></table></figure>
<p>使用 -f 选项提取指定字段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f 1 test.txt</div><div class="line">No</div><div class="line">01</div><div class="line">02</div><div class="line">03</div><div class="line"></div><div class="line">[root@localhost text]# cut -f2,3 test.txt</div><div class="line">Name Mark</div><div class="line">tom  69</div><div class="line">jack 71</div><div class="line">alex 68</div></pre></td></tr></table></figure>
<p>–complement 选项提取指定字段之外的列（打印除了第二列之外的列）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f2 --complement test.txt</div><div class="line">No Mark Percent</div><div class="line">01 69   91</div><div class="line">02 71   87</div><div class="line">03 68   98</div></pre></td></tr></table></figure>
<p>使用 -d 选项指定字段分隔符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test2.txt</div><div class="line">No;  Name;   Mark;   Percent</div><div class="line">01;  tom;    69;     91</div><div class="line">02;  jack;   71;     87</div><div class="line">03;  alex;   68;     98</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -f2 -d&quot;;&quot; test2.txt</div><div class="line">Name</div><div class="line">tom</div><div class="line">jack</div><div class="line">alex</div></pre></td></tr></table></figure>
<hr>
<h2 id="指定字段的字符或者字节范围"><a href="#指定字段的字符或者字节范围" class="headerlink" title="指定字段的字符或者字节范围"></a>指定字段的字符或者字节范围</h2><ul>
<li>N-：从第N个字节、字符、字段到结尾；</li>
<li>N-M：从第N个字节、字符、字段到第M个（包括M在内）字节、字符、字段；</li>
<li>-M：从第1个字节、字符、字段到第M个（包括M在内）字节、字符、字段。</li>
</ul>
<h2 id="上面是记法结合下面选项将摸个范围的字节-字符指定为字段"><a href="#上面是记法，结合下面选项将摸个范围的字节、字符指定为字段：" class="headerlink" title="上面是记法，结合下面选项将摸个范围的字节、字符指定为字段："></a>上面是记法，结合下面选项将摸个范围的字节、字符指定为字段：</h2><ul>
<li>-b 表示字节；</li>
<li>-c 表示字符；</li>
<li>-f 表示定义字段。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cat test.txt</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div><div class="line">abcdefghijklmnopqrstuvwxyz</div></pre></td></tr></table></figure>
<p>打印第1个到第3个字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c1-3 test.txt</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div><div class="line">abc</div></pre></td></tr></table></figure>
<p>打印前2个字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c-2 test.txt</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div><div class="line">ab</div></pre></td></tr></table></figure>
<p>打印从第5个字符开始到结尾：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost text]# cut -c5- test.txt</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div><div class="line">efghijklmnopqrstuvwxyz</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/12/tar命令详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="aquarius">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boat.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我希望世界和平">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/tar命令详解/" itemprop="url">
                  tar命令详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-12T21:58:43+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>tar命令可以为linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。 首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件。 为什么要区分这两个概念呢？这源于Linux中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（tar命令），然后再用压缩程序进行压缩（gzip bzip2命令）。</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar(选项)(参数)</div></pre></td></tr></table></figure>
<h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">-A或--catenate：新增文件到以存在的备份文件；</div><div class="line">-B：设置区块大小；</div><div class="line">-c或--create：建立新的备份文件；</div><div class="line">-C &lt;目录&gt;：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。</div><div class="line">-d：记录文件的差别；</div><div class="line">-x或--extract或--get：从备份文件中还原文件；</div><div class="line">-t或--list：列出备份文件的内容；</div><div class="line">-z或--gzip或--ungzip：通过gzip指令处理备份文件；</div><div class="line">-Z或--compress或--uncompress：通过compress指令处理备份文件；</div><div class="line">-f&lt;备份文件&gt;或--file=&lt;备份文件&gt;：指定备份文件；</div><div class="line">-v或--verbose：显示指令执行过程；</div><div class="line">-r：添加文件到已经压缩的文件；</div><div class="line">-u：添加改变了和现有的文件到已经存在的压缩文件；</div><div class="line">-j：支持bzip2解压文件；</div><div class="line">-v：显示操作过程；</div><div class="line">-l：文件系统边界设置；</div><div class="line">-k：保留原有文件不覆盖；</div><div class="line">-m：保留文件不被覆盖；</div><div class="line">-w：确认压缩文件的正确性；</div><div class="line">-p或--same-permissions：用原来的文件权限还原文件；</div><div class="line">-P或--absolute-names：文件名使用绝对名称，不移除文件名称前的“/”号；</div><div class="line">-N &lt;日期格式&gt; 或 --newer=&lt;日期时间&gt;：只将较指定日期更新的文件保存到备份文件里；</div><div class="line">--exclude=&lt;范本样式&gt;：排除符合范本样式的文件。</div></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><hr>
<h2 id="将文件全部打包成tar包"><a href="#将文件全部打包成tar包：" class="headerlink" title="将文件全部打包成tar包："></a>将文件全部打包成tar包：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tar -cvf log.tar log2012.log 仅打包，不压缩！</div><div class="line">tar -zcvf log.tar.gz log2012.log 打包后，以 gzip 压缩</div><div class="line">tar -jcvf log.tar.bz2 log2012.log 打包后，以 bzip2 压缩</div></pre></td></tr></table></figure>
<blockquote>
<p>在选项f之后的文件档名是自己取的，我们习惯上都用 .tar 来作为辨识。 如果加z选项，则以.tar.gz或.tgz来代表gzip压缩过的tar包；如果加j选项，则以.tar.bz2来作为tar包名。</p>
</blockquote>
<h2 id="查阅上述tar包内有哪些文件"><a href="#查阅上述tar包内有哪些文件：" class="headerlink" title="查阅上述tar包内有哪些文件："></a>查阅上述tar包内有哪些文件：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -ztvf log.tar.gz</div></pre></td></tr></table></figure>
<blockquote>
<p>在预设的情况下，我们可以将压缩档在任何地方解开的</p>
</blockquote>
<h2 id="只将tar内的部分文件解压出来"><a href="#只将tar内的部分文件解压出来：" class="headerlink" title="只将tar内的部分文件解压出来："></a>只将tar内的部分文件解压出来：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf /opt/soft/test/log30.tar.gz log2013.log</div></pre></td></tr></table></figure>
<blockquote>
<p>我可以透过tar -ztvf来查阅 tar 包内的文件名称，如果单只要一个文件，就可以透过这个方式来解压部分文件！</p>
</blockquote>
<h2 id="文件备份下来并且保存其权限"><a href="#文件备份下来，并且保存其权限：" class="headerlink" title="文件备份下来，并且保存其权限："></a>文件备份下来，并且保存其权限：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zcvpf log31.tar.gz log2014.log log2015.log log2016.log</div></pre></td></tr></table></figure>
<blockquote>
<p>这个-p的属性是很重要的，尤其是当您要保留原本文件的属性时。</p>
</blockquote>
<h2 id="在文件夹当中比某个日期新的文件才备份"><a href="#在文件夹当中，比某个日期新的文件才备份：" class="headerlink" title="在文件夹当中，比某个日期新的文件才备份："></a>在文件夹当中，比某个日期新的文件才备份：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -N &quot;2012/11/13&quot; -zcvf log17.tar.gz test</div></pre></td></tr></table></figure>
<h2 id="其实最简单的使用-tar-就只要记忆底下的方式即可"><a href="#其实最简单的使用-tar-就只要记忆底下的方式即可：" class="headerlink" title="其实最简单的使用 tar 就只要记忆底下的方式即可："></a>其实最简单的使用 tar 就只要记忆底下的方式即可：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</div><div class="line">查　询：tar -jtv -f filename.tar.bz2</div><div class="line">解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录</div></pre></td></tr></table></figure>
<h2 id="归档文件时想排除某写文件不备份可以使用exclude-file"><a href="#归档文件时想排除某写文件不备份，可以使用–exclude-file" class="headerlink" title="归档文件时想排除某写文件不备份，可以使用–exclude file :"></a>归档文件时想排除某写文件不备份，可以使用–exclude file :</h2><p>例如：</p>
<p>我要归档/etc目录,但不想归档/etc/passwd文件,就可以这样写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost zip]# tar -zcvf etc.tar.gz /etc --exclude /etc/passwd</div><div class="line"># 还可以多个文件，目录同事排除</div><div class="line">[root@localhost zip]# tar -zcvf etc.tar.gz /etc --exclude /etc/passwd --exclude /etc/passwd-</div><div class="line"># 这样就可以排除多个文件</div></pre></td></tr></table></figure></p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/boat.jpg" alt="aquarius">
          <p class="site-author-name" itemprop="name">aquarius</p>
           
              <p class="site-description motion-element" itemprop="description">分享学习的点点滴滴</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">aquarius</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  





  

  

  

  

</body>
</html>